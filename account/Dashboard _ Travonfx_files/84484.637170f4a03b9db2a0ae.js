"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[84484],{323109:(e,t,i)=>{i.d(t,{dematerializeBackground:()=>l,isBackgroundInBarsRange:()=>o,materializeBackground:()=>a});var n=i(650151),s=i(732149),r=i(178389);function a(e,t){if(e.start>=t.length||e.stop>=t.length)return null;const i=t[e.start],r=t[e.stop];return r===s.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i===s.INVALID_TIME_POINT_INDEX||i<=r,"start should not exceed stop"),{start:i===s.INVALID_TIME_POINT_INDEX?null:i,stop:r})}function l(e,t,i){return{id:t,start:(0,r.ensureTimePointIndexIndex)(i.indexOf(null!==e.start?e.start:s.INVALID_TIME_POINT_INDEX)),stop:(0,r.ensureTimePointIndexIndex)(i.indexOf(e.stop))}}function o(e,t){if(null===e.start)return t.firstBar()<=e.stop;const i=Math.min(e.start,e.stop),n=Math.max(e.start,e.stop);return t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar()}},206395:(e,t,i)=>{i.d(t,{DwgBoxFontType:()=>r,DwgBoxStyle:()=>n,dematerializeDwgBox:()=>h,isDwgBoxInBarsRange:()=>c,materializeDwgBox:()=>d});var n,s,r,a=i(732149),l=i(178389),o=i(92245);function d(e,t){var i,n;if(e.x1>=t.length||e.x2>=t.length||null===e.y1||null===e.y2)return null;let s=t[e.x1],r=t[e.x2];return s===a.INVALID_TIME_POINT_INDEX&&(s=null),r===a.INVALID_TIME_POINT_INDEX&&(r=null),{left:s,right:r,top:e.y1,bottom:e.y2,borderColorIndex:e.c,backgroundColorIndex:e.bc,extend:e.ex,borderStyle:e.st,borderWidth:e.w,text:e.t,wordWrap:e.tw,horizontalTextAlignment:e.tha,verticalTextAlignment:e.tva,fontSize:e.ts,textColorIndex:null!==(i=e.tc)&&void 0!==i?i:null,fontType:null!==(n=e.tf)&&void 0!==n?n:null}}function h(e,t,i){var n,s,r;return{id:t,x1:(0,l.ensureTimePointIndexIndex)(i.indexOf(null!==(n=e.left)&&void 0!==n?n:a.INVALID_TIME_POINT_INDEX)),x2:(0,l.ensureTimePointIndexIndex)(i.indexOf(null!==(s=e.right)&&void 0!==s?s:a.INVALID_TIME_POINT_INDEX)),y1:e.top,y2:e.bottom,c:e.borderColorIndex,bc:e.backgroundColorIndex,ex:e.extend,st:e.borderStyle,w:e.borderWidth,t:e.text,tw:e.wordWrap,tha:e.horizontalTextAlignment,tva:e.verticalTextAlignment,ts:e.fontSize,tf:null!==(r=e.fontType)&&void 0!==r?r:void 0,tc:e.textColorIndex}}function c(e,t){const i=e.extend;if(i===o.DwgExtend.Both)return null===e.left||null===e.right;if(null===e.left||null===e.right)return null!==e.right?e.right<=t.lastBar()&&i===o.DwgExtend.Right:null!==e.left&&(e.left>=t.firstBar()&&i===o.DwgExtend.Left);const n=Math.min(e.left,e.right),s=Math.max(e.left,e.right);if(t.contains(n)||t.contains(s)||n<t.firstBar()&&s>t.lastBar())return!0;const r=e.left<e.right?e.extend===o.DwgExtend.Left:e.extend===o.DwgExtend.Right,a=e.left<e.right?e.extend===o.DwgExtend.Right:e.extend===o.DwgExtend.Left;return s<t.firstBar()&&a||n>t.lastBar()&&r}!function(e){e.Solid="sol",e.Dotted="dot",e.Dashed="dsh",e.LeftArrow="al",e.RightArrow="ar",e.BothArrow="ab"}(n||(n={})),function(e){e.Top="top",e.Center="center",e.Bottom="bottom"}(s||(s={})),function(e){e.Monospace="monospace"}(r||(r={}))},294024:(e,t,i)=>{i.d(t,{DwgLabelStyle:()=>r,DwgLabelTextAlign:()=>n,DwgLabelYloc:()=>s,
dematerializeDwgLabel:()=>h,isDwgLabelInBarsRange:()=>c,materializeDwgLabel:()=>d});var n,s,r,a,l=i(732149),o=i(178389);function d(e,t){var i;if(e.x>=t.length)return null;const s=t[e.x];return s===l.INVALID_TIME_POINT_INDEX?null:{x:s,y:e.y,yloc:e.yl,text:e.t,style:e.st,size:e.sz,colorIndex:e.ci,textColorIndex:e.tci,textAlign:e.ta||n.Center,tooltip:e.tt||"",fontType:null!==(i=e.tf)&&void 0!==i?i:null}}function h(e,t,i){var n;return{id:t,x:(0,o.ensureTimePointIndexIndex)(i.indexOf(e.x)),y:e.y,yl:e.yloc,t:e.text,st:e.style,sz:e.size,ci:e.colorIndex,tci:e.textColorIndex,ta:e.textAlign,tt:e.tooltip,tf:null!==(n=e.fontType)&&void 0!==n?n:void 0}}function c(e,t){return t.contains(e.x)}!function(e){e.Left="left",e.Center="center",e.Right="right"}(n||(n={})),function(e){e.AboveBar="ab",e.BelowBar="bl",e.Price="pr",e.Auto="auto"}(s||(s={})),function(e){e.Xcross="xcr",e.Cross="cr",e.Triangleup="tup",e.Triangledown="tdn",e.Flag="flg",e.Circle="cir",e.Arrowup="aup",e.Arrowdown="adn",e.LabelUp="lup",e.LabelDown="ldn",e.LabelLeft="llf",e.LabelRight="lrg",e.LabelCenter="lcn",e.LabelLeftUp="luplf",e.LabelLeftDown="llwlf",e.LabelRightUp="luprg",e.LabelRightDown="llwrg",e.Square="sq",e.Diamond="dia",e.TextOutline="to",e.None="n"}(r||(r={})),function(e){e.Monospace="monospace"}(a||(a={}))},934393:(e,t,i)=>{function n(e){return{id:e.id,line1:e.line1,line2:e.line2,colorIndex:e.ci}}function s(e,t){return{id:t,line1:e.line1,line2:e.line2,ci:e.colorIndex}}i.d(t,{dematerializeDwgLineFill:()=>s,materializeDwgLineFill:()=>n})},258940:(e,t,i)=>{i.d(t,{DwgLineStyle:()=>n,dematerializeDwgLine:()=>o,isDwgLineInBarsRange:()=>d,materializeDwgLine:()=>l});var n,s=i(732149),r=i(178389),a=i(92245);function l(e,t){if(e.x1>=t.length||e.x2>=t.length||null===e.y1||null===e.y2)return null;let i=t[e.x1],n=t[e.x2];return i===s.INVALID_TIME_POINT_INDEX&&(i=null),n===s.INVALID_TIME_POINT_INDEX&&(n=null),null!==i&&null!==n||e.y1===e.y2?{id:e.id,x1:i,y1:e.y1,x2:n,y2:e.y2,style:e.st,extend:e.ex,width:e.w,colorIndex:e.ci}:null}function o(e,t,i){var n,a;const l=(0,r.ensureTimePointIndexIndex)(i.indexOf(null!==(n=e.x1)&&void 0!==n?n:s.INVALID_TIME_POINT_INDEX)),o=(0,r.ensureTimePointIndexIndex)(i.indexOf(null!==(a=e.x2)&&void 0!==a?a:s.INVALID_TIME_POINT_INDEX));return{id:t,x1:l,y1:e.y1,x2:o,y2:e.y2,st:e.style,ex:e.extend,w:e.width,ci:e.colorIndex}}function d(e,t){const i=e.extend;if(i===a.DwgExtend.Both)return null===e.x1||null===e.x2;if(null===e.x1||null===e.x2)return null!==e.x2?e.x2<=t.lastBar()&&i===a.DwgExtend.Right:null!==e.x1&&(e.x1>=t.firstBar()&&i===a.DwgExtend.Left);const n=Math.min(e.x1,e.x2),s=Math.max(e.x1,e.x2);if(t.contains(n)||t.contains(s)||n<t.firstBar()&&s>t.lastBar())return!0;const r=e.x1<e.x2?e.extend===a.DwgExtend.Left:e.extend===a.DwgExtend.Right,l=e.x1<e.x2?e.extend===a.DwgExtend.Right:e.extend===a.DwgExtend.Left;return s<t.firstBar()&&l||n>t.lastBar()&&r}!function(e){e.Solid="sol",e.Dotted="dot",e.Dashed="dsh",e.LeftArrow="al",e.RightArrow="ar",e.BothArrow="ab"}(n||(n={}))},590836:(e,t,i)=>{var n,s;function r(e,t){return{id:e.id,
position:e.pos,rows:e.rows,columns:e.cols,backgroundColorIndex:e.bgc,frameColorIndex:e.frmc,frameWidth:e.frmw,borderColorIndex:e.brdc,borderWidth:e.brdw}}function a(e,t,i){return{id:t,pos:e.position,rows:e.rows,cols:e.columns,bgc:e.backgroundColorIndex,frmc:e.frameColorIndex,frmw:e.frameWidth,brdc:e.borderColorIndex,brdw:e.borderWidth}}function l(e,t){var i,n,s;return{tableId:e.tid,row:e.row,column:e.col,widthInPercentsOfPaneWidth:e.w,heightInPercentOfPaneHeight:e.h,text:e.t,textColorIndex:e.tc,horizontalTextAlignment:e.tha,verticalTextAlignment:e.tva,fontSize:e.ts,backgroundColorIndex:e.bgc,colSpan:null!==(i=e.colspan)&&void 0!==i?i:1,rowSpan:null!==(n=e.rowspan)&&void 0!==n?n:1,tooltip:e.tt,fontType:null!==(s=e.tf)&&void 0!==s?s:null}}function o(e,t,i){var n;return{id:t,tid:e.tableId,row:e.row,col:e.column,w:e.widthInPercentsOfPaneWidth,h:e.heightInPercentOfPaneHeight,t:e.text,tc:e.textColorIndex,tha:e.horizontalTextAlignment,tva:e.verticalTextAlignment,ts:e.fontSize,bgc:e.backgroundColorIndex,colspan:e.colSpan,rowspan:e.rowSpan,tt:e.tooltip,tf:null!==(n=e.fontType)&&void 0!==n?n:void 0}}i.d(t,{DwgTableCellFontType:()=>s,dematerializeDwgTable:()=>a,dematerializeDwgTableCell:()=>o,materializeDwgTable:()=>r,materializeDwgTableCell:()=>l}),function(e){e.Top="top",e.Center="center",e.Bottom="bottom"}(n||(n={})),function(e){e.Monospace="monospace"}(s||(s={}))},396372:(e,t,i)=>{i.d(t,{HHistDirection:()=>n,HHistLocation:()=>s,HHistVolumeMode:()=>r,dematerializeHHist:()=>h,isHHistInBarsRange:()=>c,materializeHHist:()=>d});var n,s,r,a=i(650151),l=i(732149),o=i(178389);function d(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;const i=t[e.firstBarTime],n=t[e.lastBarTime];return i===l.INVALID_TIME_POINT_INDEX||n===l.INVALID_TIME_POINT_INDEX?null:((0,a.assert)(i<=n,"firstBarTime should not exceed lastBarTime"),(0,a.assert)(e.priceLow<=e.priceHigh,"priceLow should not exceed priceHigh"),{firstBarTime:i,lastBarTime:n,rate:e.rate,priceHigh:e.priceHigh,priceLow:e.priceLow})}function h(e,t,i){const n=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.firstBarTime)),s=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.lastBarTime));return{id:t,...e,firstBarTime:n,lastBarTime:s}}function c(e,t){const i=Math.min(e.firstBarTime,e.lastBarTime),n=Math.max(e.firstBarTime,e.lastBarTime);return t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar()}!function(e){e.LeftToRight="left_to_right",e.RightToLeft="right_to_left"}(n||(n={})),function(e){e.Relative="relative",e.Absolute="absolute"}(s||(s={})),function(e){e.UpDown="Up/Down",e.Total="Total",e.Delta="Delta"}(r||(r={}))},921124:(e,t,i)=>{i.d(t,{dematerializeHorizLine:()=>l,isHorizLineInBarsRange:()=>o,materializeHorizLine:()=>a});var n=i(650151),s=i(732149),r=i(178389);function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;const i=t[e.startIndex],r=t[e.endIndex];return i===s.INVALID_TIME_POINT_INDEX||r===s.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=r,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:r,level:e.level,
extendLeft:e.extendLeft,extendRight:e.extendRight})}function l(e,t,i){const n=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),s=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return{id:t,...e,startIndex:n,endIndex:s}}function o(e,t){const i=Math.min(e.startIndex,e.endIndex),n=Math.max(e.startIndex,e.endIndex);if(t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar())return!0;const s=e.startIndex<e.endIndex?e.extendLeft:e.extendRight,r=e.startIndex<e.endIndex?e.extendRight:e.extendLeft;return n<t.firstBar()&&r||i>t.lastBar()&&s}},276636:(e,t,i)=>{var n;function s(e){return{level:e.level,text:e.text}}function r(e,t,i){return{id:t,...e}}i.d(t,{TextPos:()=>n,dematerializeLevel:()=>r,materializeLevel:()=>s}),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopCenter=1]="TopCenter",e[e.TopRight=2]="TopRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.BottomLeft=6]="BottomLeft",e[e.BottomCenter=7]="BottomCenter",e[e.BottomRight=8]="BottomRight"}(n||(n={}))},573947:(e,t,i)=>{i.d(t,{dematerializeLine:()=>l,isLineInBarsRange:()=>o,materializeLine:()=>a});var n=i(650151),s=i(732149),r=i(178389);function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;const i=t[e.startIndex],r=t[e.endIndex];return i===s.INVALID_TIME_POINT_INDEX||r===s.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=r,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:r,startOffset:e.startOffset,endOffset:e.endOffset,startPrice:e.startPrice,endPrice:e.endPrice})}function l(e,t,i){const n=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),s=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return{id:t,...e,startIndex:n,endIndex:s}}function o(e,t){var i,n;const s=e.startIndex+(null!==(i=e.startOffset)&&void 0!==i?i:0),r=e.endIndex+(null!==(n=e.endOffset)&&void 0!==n?n:0),a=Math.min(s,r),l=Math.max(s,r);return t.contains(s)||t.contains(r)||a<t.firstBar()&&l>t.lastBar()}},529968:(e,t,i)=>{i.d(t,{LiveStudyGraphics:()=>k});var n=i(650151),s=i(396372),r=i(921124),a=i(329081),l=i(878475),o=i(323109),d=i(294024),h=i(258940),c=i(206395),x=i(276636),u=i(573947),_=i(14721),p=i(593885),I=i(180857),g=i(590836),m=i(934393),f=i(755470),w=i(952499),b=i(583884),T=i(686242),v=i(590713),B=i(2605);class k{constructor(){this._indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._dwglabels=new Map,this._dwgboxes=new Map,this._dwglines=new Map,this._dwgtables=new Map,this._dwgtablecells=new Map,this._dwglinefills=new Map,this._tpos=new Map,this._tpoBlockSets=new Map,this._tpoLevelGroups=new Map,this._tpoVolumeRows=new Map,this._hhistsByTimePointIndex=new Map}horizlines(){return this._horizlines}vertlines(){return this._vertlines}lines(){return this._lines}hlines(){return this._hlines}textmarks(){return this._textmarks}shapemarks(){return this._shapemarks}backgrounds(){
return this._backgrounds}polygons(){return this._polygons}trendchannels(){return this._trendchannels}hhists(){return this._hhists}dwglabels(){return this._dwglabels}dwglines(){return this._dwglines}dwgboxes(){return this._dwgboxes}dwgtables(){return this._dwgtables}dwgtablecells(){return this._dwgtablecells}dwglinefills(){return this._dwglinefills}tpos(){return this._tpos}tpoBlockSets(){return this._tpoBlockSets}tpoLevels(){return this._tpoLevelGroups}tpoVolumeRows(){return this._tpoVolumeRows}hhistsByTimePointIndex(){return this._hhistsByTimePointIndex}clear(){this._indexes=[],this._clearPrimitives()}extract(){const e=e=>e.extract(),t={indexes:this._indexes,horizlines:E(this._horizlines,e),vertlines:E(this._vertlines,e),lines:E(this._lines,e),hlines:E(this._hlines,e),textmarks:E(this._textmarks,e),shapemarks:E(this._shapemarks,e),backgrounds:E(this._backgrounds,e),polygons:E(this._polygons,e),trendchannels:E(this._trendchannels,e),hhists:E(this._hhists,e),dwglabels:E(this._dwglabels,e),dwglines:E(this._dwglines,e),dwgboxes:E(this._dwgboxes,e),dwgtables:E(this._dwgtables,e),dwgtablecells:E(this._dwgtablecells,e),dwglinefills:E(this._dwglinefills,e),tpos:E(this._tpos,e),tpoBlockSets:E(this._tpoBlockSets,e),tpoLevels:E(this._tpoLevelGroups,e),tpoVolumeRows:E(this._tpoVolumeRows,e)};return this._hhistsByTimePointIndex=new Map,new B.StaticStudyGraphics("data",t)}replaceIndexesTo(e){this._indexes=e;const t=e=>e.replaceIndexesTo(this._indexes);this._horizlines.forEach(t),this._vertlines.forEach(t),this._lines.forEach(t),this._hlines.forEach(t),this._textmarks.forEach(t),this._shapemarks.forEach(t),this._backgrounds.forEach(t),this._polygons.forEach(t),this._trendchannels.forEach(t),this._hhists.forEach(t),this._dwglabels.forEach(t),this._dwgboxes.forEach(t),this._dwglines.forEach(t),this._dwgtables.forEach(t),this._dwgtablecells.forEach(t),this._dwglinefills.forEach(t),this._tpos.forEach(t),this._tpoBlockSets.forEach(t),this._tpoLevelGroups.forEach(t),this._tpoVolumeRows.forEach(t),this._hhistsByTimePointIndex=(0,v.splitHHistsByTimePointIndex)(this._hhists)}processCommands(e,t){void 0!==e.erase&&this._processEraseCommands(e.erase),void 0!==e.create&&this._processCreateCommands(e.create,t)}_processCreateCommands(e,t){for(const i in e){if(!e.hasOwnProperty(i))continue;const v=i;switch((0,n.assert)(v in t,`There is a '${v}' in study response, but it doesn't present in graphics info!`),v){case"horizlines":L(this._horizlines,e[v],t[v],this._indexes,r.materializeHorizLine);break;case"vertlines":L(this._vertlines,e[v],t[v],this._indexes,a.materializeVertLine);break;case"lines":L(this._lines,e[v],t[v],this._indexes,u.materializeLine);break;case"hlines":L(this._hlines,e[v],t[v],this._indexes,x.materializeLevel);break;case"textmarks":L(this._textmarks,e[v],t[v],this._indexes,p.materializeTextMark);break;case"shapemarks":L(this._shapemarks,e[v],t[v],this._indexes,_.materializeShapeMark);break;case"backgrounds":L(this._backgrounds,e[v],t[v],this._indexes,o.materializeBackground);break;case"polygons":
L(this._polygons,e[v],t[v],this._indexes,l.materializePolygon);break;case"trendchannels":L(this._trendchannels,e[v],t[v],this._indexes,I.materializeTrendChannel);break;case"hhists":L(this._hhists,e[v],t[v],this._indexes,s.materializeHHist);break;case"dwglabels":L(this._dwglabels,e[v],t[v],this._indexes,d.materializeDwgLabel);break;case"dwglines":L(this._dwglines,e[v],t[v],this._indexes,h.materializeDwgLine);break;case"dwgboxes":L(this._dwgboxes,e[v],t[v],this._indexes,c.materializeDwgBox);break;case"dwgtables":L(this._dwgtables,e[v],t[v],this._indexes,g.materializeDwgTable);break;case"dwgtablecells":L(this._dwgtablecells,e[v],t[v],this._indexes,g.materializeDwgTableCell);break;case"dwglinefills":L(this._dwglinefills,e[v],t[v],this._indexes,m.materializeDwgLineFill);break;case"tpos":L(this._tpos,e[v],t[v],this._indexes,f.materializeTpo);break;case"tpoBlockSets":L(this._tpoBlockSets,e[v],t[v],this._indexes,w.materializeTpoBlockSet);break;case"tpoLevels":L(this._tpoLevelGroups,e[v],t[v],this._indexes,b.materializeTpoLevelGroup);break;case"tpoVolumeRows":L(this._tpoVolumeRows,e[v],t[v],this._indexes,T.materializeTpoVolumeRow)}}this._hhistsByTimePointIndex=(0,v.splitHHistsByTimePointIndex)(this._hhists)}_processEraseCommands(e){for(const t of e)if("all"===t.action)this._clearPrimitives();else{const e=e=>e.deleteById(t.id);switch(t.type){case"horizlines":this._horizlines.forEach(e);break;case"vertlines":this._vertlines.forEach(e);break;case"lines":this._lines.forEach(e);break;case"hlines":this._hlines.forEach(e);break;case"textmarks":this._textmarks.forEach(e);break;case"shapemarks":this._shapemarks.forEach(e);break;case"backgrounds":this._backgrounds.forEach(e);break;case"polygons":this._polygons.forEach(e);break;case"trendchannels":this._trendchannels.forEach(e);break;case"hhists":this._hhists.forEach(e);break;case"dwglabels":this._dwglabels.forEach(e);break;case"dwglines":this._dwglines.forEach(e);break;case"dwgboxes":this._dwgboxes.forEach(e);break;case"dwgtables":this._dwgtables.forEach(e);break;case"dwgtablecells":this._dwgtablecells.forEach(e);break;case"dwglinefills":this._dwglinefills.forEach(e);break;case"tpos":this._tpos.forEach(e);break;case"tpoBlockSets":this._tpoBlockSets.forEach(e);break;case"tpoLevels":this._tpoLevelGroups.forEach(e);break;case"tpoVolumeRows":this._tpoVolumeRows.forEach(e)}}this._hhistsByTimePointIndex=(0,v.splitHHistsByTimePointIndex)(this._hhists)}_clearPrimitives(){this._horizlines.clear(),this._vertlines.clear(),this._lines.clear(),this._hlines.clear(),this._textmarks.clear(),this._shapemarks.clear(),this._backgrounds.clear(),this._polygons.clear(),this._trendchannels.clear(),this._hhists.clear(),this._dwglabels.clear(),this._dwgboxes.clear(),this._dwglines.clear(),this._dwgtables.clear(),this._dwgtablecells.clear(),this._dwglinefills.clear(),this._tpos.clear(),this._tpoBlockSets.clear(),this._tpoLevelGroups.clear(),this._tpoVolumeRows.clear(),this._hhistsByTimePointIndex=new Map}}class z{constructor(e,t){this._primitivesDataById=new Map,this._primitiveById=new Map,
this._materializePrimitive=e,this._indexes=t}forEach(e,t){this._primitiveById.forEach((i=>{e.call(t,i,i,this)}))}has(e){let t=!1;return this._primitiveById.forEach((i=>{t=t||i===e})),t}get size(){return this._primitiveById.size}[Symbol.iterator](){return this._primitiveById.values()}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}values(){return this._primitiveById.values()}hasId(e){return this._primitiveById.has(e)}addData(e){this._primitivesDataById.set(e.id,e),this._tryMaterialize(e)}deleteById(e){this._primitiveById.delete(e),this._primitivesDataById.delete(e)}clear(){this._primitivesDataById.clear(),this._primitiveById.clear()}replaceIndexesTo(e){this._indexes=e,this._primitiveById.clear(),this._primitivesDataById.forEach(this._tryMaterialize,this)}extract(){const e=new Set(this._primitivesDataById.values());return this._primitivesDataById=new Map,this._primitiveById.clear(),e}_tryMaterialize(e){const t=this._materializePrimitive(e,this._indexes);null!==t&&((0,n.assert)(!this._primitiveById.has(e.id),"primitive with specified id should not exist"),this._primitiveById.set(e.id,t))}}function E(e,t){const i=new Map;return e.forEach(((e,n)=>i.set(n,t(e)))),i}function L(e,t,i,s,r){if(void 0!==t)for(const a of t){const t=a.styleId;void 0!==i&&(0,n.assert)(t in i,"Every style used by graphics primitive should be declared in study metainfo");let l=e.get(t);void 0===l&&(l=new z(r,s),e.set(t,l)),a.data.forEach(l.addData.bind(l))}}},878475:(e,t,i)=>{i.d(t,{dematerializePolygon:()=>a,isPolygonInBarsRange:()=>l,materializePolygon:()=>r});var n=i(732149),s=i(178389);function r(e,t){for(const i of e.points){if(i.index>=t.length)return null;if(t[i.index]===n.INVALID_TIME_POINT_INDEX)return null}return{points:e.points.map((e=>({index:t[e.index],offset:e.offset,level:e.level})))}}function a(e,t,i){return{id:t,points:e.points.map((e=>({...e,index:(0,s.ensureTimePointIndexIndex)(i.indexOf(e.index))})))}}function l(e,t){var i;if(e.points.some((e=>{var i;return t.contains(e.index+(null!==(i=e.offset)&&void 0!==i?i:0))})))return!0;let n=!1,s=!1;const r=t.firstBar();for(const t of e.points)t.index+(null!==(i=t.offset)&&void 0!==i?i:0)<r?n=!0:s=!0;return n&&s}},14721:(e,t,i)=>{i.d(t,{dematerializeShapeMark:()=>l,isShapeMarkInBarsRange:()=>o,materializeShapeMark:()=>a});var n,s=i(732149),r=i(178389);function a(e,t){if(e.time>=t.length)return null;const i=t[e.time];return i===s.INVALID_TIME_POINT_INDEX?null:{time:i,price:e.price}}function l(e,t,i){const n=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.time));return{id:t,...e,time:n}}function o(e,t){return t.contains(e.time)}!function(e){e.Circle="circle",e.ArrowUp="arrowUp",e.ArrowDown="arrowDown",e.ArrowRight="arrowRight",e.ArrowLeft="arrowLeft",e.Square="square"}(n||(n={}))},2605:(e,t,i)=>{i.d(t,{StaticStudyGraphics:()=>B,emptyStudyGraphics:()=>L,loadStudyGraphics:()=>D,saveStudyGraphics:()=>M})
;var n=i(732149),s=i(921124),r=i(329081),a=i(396372),l=i(878475),o=i(323109),d=i(276636),h=i(573947),c=i(14721),x=i(593885),u=i(180857),_=i(294024),p=i(258940),I=i(206395),g=i(590836),m=i(934393),f=i(755470),w=i(952499),b=i(583884),T=i(686242),v=i(590713);class B{constructor(e,t){if(this._indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._dwglabels=new Map,this._dwglines=new Map,this._dwgboxes=new Map,this._dwgtables=new Map,this._dwgtablecells=new Map,this._dwglinefills=new Map,this._tpos=new Map,this._tpoBlockSets=new Map,this._tpoLevelGroups=new Map,this._tpoVolumeRows=new Map,"data"===e){const e=t;this._indexes=e.indexes,this._vertlines=k(e.vertlines,this._indexes,r.materializeVertLine),this._horizlines=k(e.horizlines,this._indexes,s.materializeHorizLine),this._polygons=k(e.polygons,this._indexes,l.materializePolygon),this._hhists=k(e.hhists,this._indexes,a.materializeHHist),this._backgrounds=k(e.backgrounds,this._indexes,o.materializeBackground),this._lines=k(e.lines,this._indexes,h.materializeLine),this._hlines=k(e.hlines,this._indexes,d.materializeLevel),this._textmarks=k(e.textmarks,this._indexes,x.materializeTextMark),this._shapemarks=k(e.shapemarks,this._indexes,c.materializeShapeMark),this._trendchannels=k(e.trendchannels,this._indexes,u.materializeTrendChannel),this._dwglabels=k(e.dwglabels,this._indexes,_.materializeDwgLabel),this._dwglines=k(e.dwglines,this._indexes,p.materializeDwgLine),this._dwgboxes=k(e.dwgboxes,this._indexes,I.materializeDwgBox),this._dwgtables=k(e.dwgtables,this._indexes,g.materializeDwgTable),this._dwgtablecells=k(e.dwgtablecells,this._indexes,g.materializeDwgTableCell),this._dwglinefills=k(e.dwglinefills,this._indexes,m.materializeDwgLineFill),this._tpos=k(e.tpos,this._indexes,f.materializeTpo),this._tpoBlockSets=k(e.tpoBlockSets,this._indexes,w.materializeTpoBlockSet),this._tpoLevelGroups=k(e.tpoLevels,this._indexes,b.materializeTpoLevelGroup),this._tpoVolumeRows=k(e.tpoVolumeRows,this._indexes,T.materializeTpoVolumeRow)}else if("state"===e){const e=t;this._indexes=e.indexes||[],this._vertlines=z(e.vertlines,this._indexes,r.materializeVertLine),this._horizlines=z(e.horizlines,this._indexes,s.materializeHorizLine),this._polygons=z(e.polygons,this._indexes,l.materializePolygon),this._hhists=z(e.hhists,this._indexes,a.materializeHHist),this._backgrounds=z(e.backgrounds,this._indexes,o.materializeBackground),this._lines=z(e.lines,this._indexes,h.materializeLine),this._hlines=z(e.hlines,this._indexes,d.materializeLevel),this._textmarks=z(e.textmarks,this._indexes,x.materializeTextMark),this._shapemarks=z(e.shapemarks,this._indexes,c.materializeShapeMark),this._trendchannels=z(e.trendchannels,this._indexes,u.materializeTrendChannel),this._dwglabels=z(e.dwglabels,this._indexes,_.materializeDwgLabel),this._dwglines=z(e.dwglines,this._indexes,p.materializeDwgLine),
this._dwgboxes=z(e.dwgboxes,this._indexes,I.materializeDwgBox),this._dwgtables=z(e.dwgtables,this._indexes,g.materializeDwgTable),this._dwgtablecells=z(e.dwgtablecells,this._indexes,g.materializeDwgTableCell),this._dwglinefills=z(e.dwglinefills,this._indexes,m.materializeDwgLineFill),this._tpos=z(e.tpos,this._indexes,f.materializeTpo),this._tpoBlockSets=z(e.tpoBlockSets,this._indexes,w.materializeTpoBlockSet),this._tpoLevelGroups=z(e.tpoLevels,this._indexes,b.materializeTpoLevelGroup),this._tpoVolumeRows=z(e.tpoVolumeRows,this._indexes,T.materializeTpoVolumeRow)}this._hhistsByTimePointIndex=(0,v.splitHHistsByTimePointIndex)(this._hhists)}horizlines(){return this._horizlines}vertlines(){return this._vertlines}lines(){return this._lines}hlines(){return this._hlines}textmarks(){return this._textmarks}shapemarks(){return this._shapemarks}backgrounds(){return this._backgrounds}polygons(){return this._polygons}trendchannels(){return this._trendchannels}hhists(){return this._hhists}dwglabels(){return this._dwglabels}dwglines(){return this._dwglines}dwgboxes(){return this._dwgboxes}dwgtables(){return this._dwgtables}dwgtablecells(){return this._dwgtablecells}dwglinefills(){return this._dwglinefills}tpos(){return this._tpos}tpoBlockSets(){return this._tpoBlockSets}tpoLevels(){return this._tpoLevelGroups}tpoVolumeRows(){return this._tpoVolumeRows}hhistsByTimePointIndex(){return this._hhistsByTimePointIndex}}function k(e,t,i){const n=new Map;return e.forEach(((e,s)=>{const r=n.get(s)||new Set;e.forEach((e=>{const n=i(e,t);null!==n&&r.add(n)})),n.set(s,r)})),n}function z(e,t,i){const n=new Map;if(void 0===e)return n;for(const s of e){const e=s.styleId,r=n.get(e)||new Set;s.data.forEach((e=>{const n=i(e,t);null!==n&&r.add(n)})),n.set(e,r)}return n}function E(e,t,i,n,s,r){const a=[];return e.forEach(((e,l)=>{e.forEach((e=>{(null===s||n(e,s))&&function(e,t,i){let n=null;for(const i of e)i.styleId===t&&(n=i);null===n&&(n={styleId:t,data:[]},e.push(n)),n.data.push(i)}(a,l,r(e,t(e),i))}))})),a.length>0?a:void 0}function L(){return new B}function D(e){return new B("state",e)}function y(e,t){return!0}function M(e,t){const i=function(e){const t=new Set;e.horizlines().forEach(((e,i)=>{e.forEach((e=>{t.add(e.startIndex),t.add(e.endIndex)}))})),e.vertlines().forEach(((e,i)=>{e.forEach((e=>{t.add(e.index)}))})),e.lines().forEach(((e,i)=>{e.forEach((e=>{t.add(e.startIndex),t.add(e.endIndex)}))})),e.textmarks().forEach(((e,i)=>{e.forEach((e=>{t.add(e.time)}))})),e.shapemarks().forEach(((e,i)=>{e.forEach((e=>{t.add(e.time)}))})),e.backgrounds().forEach(((e,i)=>{e.forEach((e=>{t.add(null!==e.start?e.start:n.INVALID_TIME_POINT_INDEX),t.add(e.stop)}))})),e.polygons().forEach(((e,i)=>{e.forEach((e=>{e.points.forEach((e=>{t.add(e.index)}))}))})),e.trendchannels().forEach(((e,i)=>{e.forEach((e=>{t.add(e.startIndex),t.add(e.endIndex)}))})),e.hhists().forEach(((e,i)=>{e.forEach((e=>{t.add(e.firstBarTime),t.add(e.lastBarTime)}))})),e.dwglabels().forEach(((e,i)=>{e.forEach((e=>{t.add(e.x)}))})),e.dwglines().forEach(((e,i)=>{e.forEach((e=>{var i,s
;t.add(null!==(i=e.x1)&&void 0!==i?i:n.INVALID_TIME_POINT_INDEX),t.add(null!==(s=e.x2)&&void 0!==s?s:n.INVALID_TIME_POINT_INDEX)}))})),e.dwgboxes().forEach(((e,i)=>{e.forEach((e=>{var i,s;t.add(null!==(i=e.left)&&void 0!==i?i:n.INVALID_TIME_POINT_INDEX),t.add(null!==(s=e.right)&&void 0!==s?s:n.INVALID_TIME_POINT_INDEX)}))})),e.tpos().forEach(((e,i)=>{e.forEach((e=>{t.add(e.firstBarTime),t.add(e.lastBarTime)}))}));const i=Array.from(t);return i.sort(((e,t)=>e-t)),i}(e),v={indexes:i};let B=0;const k=()=>++B,z=e=>e.id;return v.vertlines=E(e.vertlines(),k,i,r.isVertLineInBarsRange,t,r.dematerializeVertLine),v.horizlines=E(e.horizlines(),k,i,s.isHorizLineInBarsRange,t,s.dematerializeHorizLine),v.polygons=E(e.polygons(),k,i,l.isPolygonInBarsRange,t,l.dematerializePolygon),v.hhists=E(e.hhists(),k,i,a.isHHistInBarsRange,t,a.dematerializeHHist),v.backgrounds=E(e.backgrounds(),k,i,o.isBackgroundInBarsRange,t,o.dematerializeBackground),v.lines=E(e.lines(),k,i,h.isLineInBarsRange,t,h.dematerializeLine),v.hlines=E(e.hlines(),k,i,y,t,d.dematerializeLevel),v.textmarks=E(e.textmarks(),k,i,x.isTextMarkInBarsRange,t,x.dematerializeTextMark),v.shapemarks=E(e.shapemarks(),k,i,c.isShapeMarkInBarsRange,t,c.dematerializeShapeMark),v.trendchannels=E(e.trendchannels(),k,i,u.isTrendChannelInBarsRange,t,u.dematerializeTrendChannel),v.dwglabels=E(e.dwglabels(),k,i,_.isDwgLabelInBarsRange,t,_.dematerializeDwgLabel),v.dwglines=E(e.dwglines(),z,i,p.isDwgLineInBarsRange,t,p.dematerializeDwgLine),v.dwgboxes=E(e.dwgboxes(),k,i,I.isDwgBoxInBarsRange,t,I.dematerializeDwgBox),v.dwgtables=E(e.dwgtables(),z,i,y,t,g.dematerializeDwgTable),v.dwgtablecells=E(e.dwgtablecells(),k,i,y,t,g.dematerializeDwgTableCell),v.dwglinefills=E(e.dwglinefills(),k,i,y,t,m.dematerializeDwgLineFill),v.tpos=E(e.tpos(),z,i,y,t,f.dematerializeTpo),v.tpoBlockSets=E(e.tpoBlockSets(),k,i,y,t,w.dematerializeTpoBlockSet),v.tpoLevels=E(e.tpoLevels(),k,i,y,t,b.dematerializeTpoLevelGroup),v.tpoVolumeRows=E(e.tpoVolumeRows(),k,i,y,t,T.dematerializeTpoVolumeRow),v}},590713:(e,t,i)=>{i.d(t,{isStudyGraphicsEmpty:()=>r,primitivesZOrders:()=>s,splitHHistsByTimePointIndex:()=>a});const n=["horizlines","vertlines","lines","hlines","textmarks","shapemarks","backgrounds","polygons","trendchannels","hhists","dwglabels","dwglines","dwgboxes","dwgtables","dwgtablecells","dwglinefills","tpos","tpoBlockSets","tpoLevels","tpoVolumeRows"],s=new Map([["polygons",-4],["trendchannels",-3],["textmarks",-2],["shapemarks",-2],["backgrounds",-1],["hlines",1],["horizlines",1],["hhists",1],["dwglinefills",2],["vertlines",3],["lines",3],["dwglines",3],["dwgboxes",4],["dwglabels",5],["dwgtables",6],["dwgtablecells",6],["tpos",7],["tpoBlockSets",7],["tpoLevels",7],["tpoVolumeRows",7]]);function r(e){return!n.some((t=>e[t]().size>0))}function a(e){const t=new Map;return e.forEach(((e,i)=>{e.forEach((e=>{const n={...e,styleId:i},s=e.firstBarTime;let r=t.get(s);void 0===r&&(r=new Set,t.set(s,r)),r.add(n)}))})),t}},593885:(e,t,i)=>{i.d(t,{TextMarkType:()=>n,dematerializeTextMark:()=>o,isTextMarkInBarsRange:()=>d,
materializeTextMark:()=>l});var n,s,r=i(732149),a=i(178389);function l(e,t){if(e.time>=t.length)return null;const i=t[e.time];return i===r.INVALID_TIME_POINT_INDEX?null:{time:i,offset:e.offset,text:e.text,price:e.price}}function o(e,t,i){const n=(0,a.ensureTimePointIndexIndex)(i.indexOf(e.time));return{id:t,...e,time:n}}function d(e,t){var i;return t.contains(e.time+(null!==(i=e.offset)&&void 0!==i?i:0))}!function(e){e.Triangle="triangle",e.Rectangle="rectangle"}(n||(n={})),function(e){e.Verdana="Verdana",e.CourierNew="Courier New",e.TimesNewRoman="Times New Roman",e.Arial="Arial"}(s||(s={}))},952499:(e,t,i)=>{function n(e,t){return{tpoId:e.tpoId,blocks:e.blocks,rowIndex:e.rowIndex}}function s(e,t,i){return{id:t,tpoId:e.tpoId,blocks:e.blocks,rowIndex:e.rowIndex}}i.d(t,{dematerializeTpoBlockSet:()=>s,materializeTpoBlockSet:()=>n})},583884:(e,t,i)=>{function n(e,t){return{tpoId:e.tpoId,tpoPocIndex:e.tpoPocIndex,tpoValIndex:e.tpoValIndex,tpoVahIndex:e.tpoVahIndex,tpoMidpointIndex:e.tpoMidpointIndex,volumePocIndex:e.volumePocIndex,volumeValIndex:e.volumeValIndex,volumeVahIndex:e.volumeVahIndex}}function s(e,t,i){return{id:t,tpoId:e.tpoId,tpoPocIndex:e.tpoPocIndex,tpoValIndex:e.tpoValIndex,tpoVahIndex:e.tpoVahIndex,tpoMidpointIndex:e.tpoMidpointIndex,volumePocIndex:e.volumePocIndex,volumeValIndex:e.volumeValIndex,volumeVahIndex:e.volumeVahIndex}}i.d(t,{dematerializeTpoLevelGroup:()=>s,materializeTpoLevelGroup:()=>n})},686242:(e,t,i)=>{function n(e,t){return{tpoId:e.tpoId,rowIndex:e.rowIndex,volume:e.volume}}function s(e,t,i){return{id:t,tpoId:e.tpoId,rowIndex:e.rowIndex,volume:e.volume}}i.d(t,{dematerializeTpoVolumeRow:()=>s,materializeTpoVolumeRow:()=>n})},755470:(e,t,i)=>{i.d(t,{dematerializeTpo:()=>l,materializeTpo:()=>a});var n=i(650151),s=i(732149),r=i(178389);function a(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;const i=t[e.firstBarTime],r=t[e.lastBarTime];return i===s.INVALID_TIME_POINT_INDEX||r===s.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=r,"firstBarTime should not exceed lastBarTime"),{id:e.id,firstBarTime:i,lastBarTime:r,priceRange:e.priceRange})}function l(e,t,i){return{id:t,firstBarTime:(0,r.ensureTimePointIndexIndex)(i.indexOf(e.firstBarTime)),lastBarTime:(0,r.ensureTimePointIndexIndex)(i.indexOf(e.lastBarTime)),priceRange:e.priceRange}}},180857:(e,t,i)=>{i.d(t,{dematerializeTrendChannel:()=>l,isTrendChannelInBarsRange:()=>o,materializeTrendChannel:()=>a});var n=i(650151),s=i(732149),r=i(178389);function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;const i=t[e.startIndex],r=t[e.endIndex];return i===s.INVALID_TIME_POINT_INDEX||r===s.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=r,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:r,extendLeft:e.extendLeft,extendRight:e.extendRight,startHighPrice:e.startHighPrice,startLowPrice:e.startLowPrice,endHighPrice:e.endHighPrice,transparency:e.transparency})}function l(e,t,i){const n=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),s=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.endIndex))
;return{id:t,...e,startIndex:n,endIndex:s}}function o(e,t){const i=Math.min(e.startIndex,e.endIndex),n=Math.max(e.startIndex,e.endIndex);if(t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar())return!0;const s=e.startIndex<e.endIndex?e.extendLeft:e.extendRight,r=e.startIndex<e.endIndex?e.extendRight:e.extendLeft;return n<t.firstBar()&&r||i>t.lastBar()&&s}},329081:(e,t,i)=>{i.d(t,{dematerializeVertLine:()=>a,isVertLineInBarsRange:()=>l,materializeVertLine:()=>r});var n=i(732149),s=i(178389);function r(e,t){if(e.index>=t.length)return null;const i=t[e.index];return i===n.INVALID_TIME_POINT_INDEX?null:{startPrice:e.startPrice,endPrice:e.endPrice,index:i,extendTop:e.extendTop,extendBottom:e.extendBottom}}function a(e,t,i){const n=(0,s.ensureTimePointIndexIndex)(i.indexOf(e.index));return{id:t,...e,index:n}}function l(e,t){return t.contains(e.index)}},989709:(e,t,i)=>{function n(e){const t=new Map;return e.plots.forEach(((e,i)=>{t.set(e.id,(e=>e[i+1]))})),t}function s(e,t){return null==e[t]}i.d(t,{studyEmptyPlotValuePredicate:()=>s,studyPlotFunctionMap:()=>n})}}]);