(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[1937],{989897:e=>{e.exports={}},600303:(e,t,s)=>{"use strict";s.d(t,{MarketStatusIndicator:()=>r});var i=s(777754),o=(s(989897),s(780792));const n={classMap:{invalid:"tv-market-status--invalid",market:"tv-market-status--market",out_of_session:"tv-market-status--out-of-session",post_market:"tv-market-status--post-market",pre_market:"tv-market-status--pre-market",loading:"tv-market-status--loading",holiday:"tv-market-status--holiday",replay:"tv-market-status--replay"},classSuffix:"",data:{},extraTitle:"",labelMap:{invalid:i.t(null,void 0,s(814177)),market:i.t(null,void 0,s(486533)),out_of_session:i.t(null,void 0,s(548979)),post_market:i.t(null,void 0,s(566812)),pre_market:i.t(null,void 0,s(845198)),loading:i.t(null,void 0,s(25911)),holiday:i.t(null,void 0,s(988958)),replay:""},short:!1,showTooltip:!0,tooltipType:"custom"};class r extends o.AbstractIndicator{constructor(e){super(e),this._quoteSessionPrefix="market-status-indicator",this._componentClass="tv-market-status",this._extraTitle="",this._init(e)}setStatus(e,t){const s={values:{current_session:e}};this.update(s,t)}getTooltipText(){let e=super.getTooltipText();return""===e||""!==this._extraTitle&&(e=`${e}, ${this._extraTitle}`),e}setExtraTitle(e){this._extraTitle=e}reset(){this._clearClasses(),this._labelEl.textContent="",this._extraTitle="",this._el.setAttribute("title",""),this._value=""}enableShortMode(e=!0){void 0!==this._labelEl&&this._labelEl.classList.add("i-hidden"),super.enableShortMode()}disableShortMode(){void 0!==this._labelEl&&this._labelEl.classList.remove("i-hidden"),super.disableShortMode()}_renderLabel(){this._labelEl.textContent=this.getLabel()}_getValueFromData(e){return void 0!==e.values&&void 0!==e.values.current_session?e.values.current_session:this.getValue()}_render(){this._renderLabelElement(),this._renderDotElement(),super._render()}_init(e){const t=Object.assign({},n,e);super._init(t),this.setExtraTitle(t.extraTitle),this._render()}_renderLabelElement(){void 0===this._labelEl&&(this._labelEl=document.createElement("span"),this._labelEl.classList.add(`${this._componentClass}__label`),this._labelEl.classList.add(`${this._componentClass}__label${this._classSuffix}`),this._el.appendChild(this._labelEl))}_renderDotElement(){void 0===this._dotEl&&(this._dotEl=document.createElement("span"),this._dotEl.classList.add(`${this._componentClass}__dot`),this._dotEl.classList.add(`${this._componentClass}__dot${this._classSuffix}`),this._el.appendChild(this._dotEl))}}},461909:(e,t,s)=>{"use strict";function i(e){if(void 0===e)return null;const t=e.match(/(delayed_streaming)_([\d]{1,4})/);return null===t?null:{mode:t[1],interval:parseInt(t[2])}}function o(e){const t=i(e.update_mode);return null===t||(e.update_mode=t.mode,e.update_mode_seconds=t.interval),e}s.r(t),s.d(t,{normalizeUpdateMode:()=>o,parseUpdateMode:()=>i})},287102:(e,t,s)=>{"use strict";s.d(t,{isMcxQuoteData:()=>n});var i=s(416234);function o(e){return e===i.SymbolGroup.McxFlag}function n(e){var t
;return!!e&&(o(e.symbolname)||"permission_denied"===e.status&&o(null===(t=e.values)||void 0===t?void 0:t.alternative))}},113911:(e,t,s)=>{"use strict";function i(e){return e.endsWith("_dly")}function o(e){return!!e&&(!(void 0===e.symbolname||!i(e.symbolname))||Boolean("permission_denied"===e.status&&e.values&&void 0!==e.values.alternative&&i(e.values.alternative)))}s.d(t,{isSfQuoteData:()=>o})},132317:(e,t,s)=>{"use strict";s.d(t,{trackActionFollow:()=>o});var i=s(776734);function o(e,t,s){const o=s.authorId?s.authorId.toString():"",n=s.symbol?s.symbol:"",r=s.symbolType?s.symbolType:"";(0,i.getTracker)().then((s=>{s&&s.trackFollow(e,t,o,n,r)}))}},416234:(e,t,s)=>{"use strict";s.d(t,{SymbolGroup:()=>i,getSymbolGroupData:()=>r});s(586463);var i,o=s(777754);!function(e){e.NseFlag="nse_free",e.McxFlag="mcx_free"}(i||(i={}));const n={[i.NseFlag]:{title:o.t(null,void 0,s(343857)),description:o.t(null,void 0,s(552666))}};function r(e){return n[e]?n[e]:null}},6613:(e,t,s)=>{"use strict";s.r(t),s.d(t,{QUOTE_FIELDS:()=>n,QUOTE_FIELDS_CACHE:()=>r,QuoteCache:()=>o});var i=s(650151);class o{constructor(e){this._cache=new Map,this._fields=[...e.fields]}update(e,t,s){const o=(0,i.ensureDefined)(e.symbolname);if(this._cache.has(o)||this._cache.set(o,{symbolname:o,status:e.status,values:{}}),"error"===e.status)return;const n=(0,i.ensureDefined)(this._cache.get(o));n.status=e.status;for(const i of this._fields)t.has(i)&&(s||void 0!==e.values[i])&&(n.values[i]=e.values[i])}get(e){var t;return null!==(t=this._cache.get(e))&&void 0!==t?t:null}fields(){return this._fields}}
const n=new Set(["pro_name","base_name","logoid","currency-logoid","base-currency-logoid","source-logoid","short_name","timezone","current_session","last_price","lp_time","prev_close_price","open_price","high_price","low_price","price_52_week_high","price_52_week_low","ask","ask_size","bid","bid_size","rch","rchp","rtc","data_frequency","reference-last-period-start","business_description","web_site_url","number_of_employees","float_shares_outstanding","earnings_release_next_calendar_date","root","description","exchange","listed_exchange","type","country_code","provider_id","sector","typespecs","visible-plots-set","industry","currency_id","last_price","fractional","minmov","minmove2","pricescale","change","change_percent","volume","average_volume","market_cap_basic","total_revenue","earnings_per_share_basic_ttm","price_earnings_ttm","beta_1_year","dps_common_stock_prim_issue_fy","dividends_yield","earnings_release_next_date","earnings_per_share_forecast_next_fq","earnings_release_date","earnings_per_share_fq","fundamental_currency_code","number_of_employees","web_site_url","business_description","founded","ceo","float_shares_outstanding","total_shares_outstanding","dividend_payout_ratio_ttm","dividends_yield_current","dividend_ex_date_upcoming","dividend_amount_upcoming","dividend_amount_recent","dividend_ex_date_recent","total_revenue_fq_h","total_revenue_fy_h","net_income_fy_h","net_income_fq_h","total_assets_fy_h","total_assets_fq_h","total_liabilities_fy_h","total_liabilities_fq_h","cash_f_operating_activities_fy_h","cash_f_operating_activities_fq_h","cash_f_investing_activities_fy_h","cash_f_investing_activities_fq_h","cash_f_financing_activities_fy_h","cash_f_financing_activities_fq_h","fiscal_period_fy_h","fiscal_period_fq_h","earnings_release_date_fq_h","earnings_release_next_date_fq","earnings_per_share_forecast_next_fq","earnings_per_share_forecast_fq_h","earnings_per_share_fq_h","earnings_fiscal_period_fq_h","next_earnings_fiscal_period_fq","earnings_release_next_time","is_next_earnings_release_date_estimated","symbol-primaryname","currency_code","rates_mc","rates_fy","rates_ttm","value_unit_id","value-unit-id","update_mode","language","local_description","short_description","source","source2","format","recommendation_mark","last_report_frequency","price_target_estimates_num","price_target_average","update_mode_seconds","recommendation_total","recommendation_buy","recommendation_over","recommendation_hold","recommendation_under","recommendation_sell","recommendation_total","price_target_high","price_target_low","rates_pt","rates_pt","total_revenue_fy_h","total_revenue_fq_h","total_revenue_fh_h","net_income_fy_h","net_income_fq_h","net_income_fh_h","total_assets_fy_h","total_assets_fq_h","total_assets_fh_h","total_liabilities_fy_h","total_liabilities_fq_h","total_liabilities_fh_h","cash_f_operating_activities_fy_h","cash_f_operating_activities_fq_h","cash_f_operating_activities_fh_h","cash_f_investing_activities_fy_h","cash_f_investing_activities_fq_h","cash_f_investing_activities_fh_h","cash_f_financing_activities_fy_h","cash_f_financing_activities_fq_h","cash_f_financing_activities_fh_h","fiscal_period_fy_h","fiscal_period_fq_h","fiscal_period_fh_h","fiscal_period_fy","earnings_release_date_fq_h","earnings_release_date_fy_h","earnings_release_date_fh_h","earnings_release_next_date_fq","earnings_release_next_date_fy","earnings_release_next_date_fh","earnings_release_next_time","is_next_earnings_release_date_estimated","earnings_per_share_forecast_next_fq","earnings_per_share_forecast_next_fy","earnings_per_share_forecast_next_fh","earnings_per_share_forecast_fq_h","earnings_per_share_forecast_fy_h","earnings_per_share_forecast_fh_h","earnings_per_share_fq_h","earnings_per_share_fy_h","earnings_per_share_fh_h","earnings_fiscal_period_fq_h","earnings_fiscal_period_fy_h","earnings_fiscal_period_fh_h","next_earnings_fiscal_period_fq","next_earnings_fiscal_period_fy","next_earnings_fiscal_period_fh","revenue_fq_h","revenue_fy_h","revenue_fh_h","revenue_forecast_fq_h","revenue_forecast_fy_h","revenue_forecast_fh_h","revenue_forecast_next_fq","revenue_forecast_next_fy","revenue_forecast_next_fh","revenue_seg_by_business_h","revenue_seg_by_region_h","dividend_payout_ratio_ttm","dividends_yield_current","dividend_ex_date_upcoming","dividend_amount_upcoming","dividend_amount_recent","dividend_ex_date_recent","dividend_amount_h","total_revenue_fy","gross_profit_fy","ebitda_fy","ebit_fy","net_income_fy","total_debt_fy_h","free_cash_flow_fy_h","cash_n_equivalents_fy_h","total_current_assets_fy","total_current_liabilities_fy","total_non_current_assets_fy","total_non_current_liabilities_fy","price_sales_fy_h","price_earnings_fy_h","diluted_net_income_ttm","total_revenue_ttm","price_earnings_current","price_sales_current","isin","website","doc","reddit","twitter","facebook","telegram","forum","explorer","chat","sources","contracts","crypto_common_categories","crypto_asset","dividends_availability","earnings_availability","financials_availability"]),r=new o({
fields:n})},876332:(e,t,s)=>{"use strict";s.r(t),s.d(t,{destroyQuoteSessions:()=>l,getQuoteSessionInstance:()=>r,getQuoteSessionNoEnsure:()=>_,setQuoteSessionInstance:()=>a});var i=s(11228),o=s.n(i);const n={};function r(e="full"){return n[e]||a(e,new(o())(e)),n[e]}function a(e="full",t){n[e]=t}function _(e="full"){return n[e]}function l(){for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];void 0!==t&&t.destroy(),delete n[e]}}},497981:(e,t,s)=>{"use strict";s.d(t,{PriceColorer:()=>i});var i,o=s(81979),n=s(551238);!function(e){function t(e,t){return 0===e?t&&void 0!==t.neutral?t.neutral:o.color.black70:e>0?t&&void 0!==t.up?t.up:n.colorsPalette["color-success"]:t&&void 0!==t.down?t.down:n.colorsPalette["color-danger"]}e.formatSign=t,e.formatDiff=function(e,s){return t(s-e)},e.domDifference=function(e,t,s=0,i="",o=""){function n(e){const t=document.createElement("span");return t.innerHTML=e,t}const r=document.createElement("div");if(!s)return r.appendChild(n(e)),r;const a=e+"",_=t+"";let l=null;if(a.length===_.length){for(let e=0;e<a.length;e++)if(a.charAt(e)!==_.charAt(e)){l=e;break}}else l=Number("0");if(null===l)return r.appendChild(n(a)),r;const c=n(a.substring(0,l)),h=document.createElement("span");return h.className=s<0?i:o,h.appendChild(n(a.substring(l))),r.appendChild(c),r.appendChild(h),r}}(i||(i={}))},846540:(e,t,s)=>{"use strict";s.r(t),s.d(t,{types:()=>i});const i={ECONOMIC:"economic",QUANDL:"quandl"}},924335:(e,t,s)=>{"use strict";s.d(t,{LastChanceType:()=>n,OFFERS:()=>i,OfferKind:()=>o});const i={trial:"trial",early_access:"early_access",black_friday:"black_friday",cyber_monday:"cyber_monday",custom_discount:"custom_discount",longer_cycle:"longer_cycle",upgrade:"upgrade",extend:"extend",last_chance:"last_chance",one_usd:"one_usd",three_months:"three_months",six_months:"six_months",coupon:"coupon"},o={early_access:"early_access",black_friday:"black_friday",last_chance:"last_chance",one_usd:"1 usd offer",three_months:"3 months offer",six_months:"six_months",custom_discount:"custom_discount"};var n;!function(e){e.TwoWeeks="LastChance_2w",e.TwoDays="LastChance_2d",e.Hours="LastChance_24h"}(n||(n={}))},397150:(e,t,s)=>{"use strict";s.d(t,{showTooManyStudiesNotice:()=>a});var i=s(777754),o=s(778016),n=s(833813),r=s(779923);function a(e){"number"!=typeof e&&(e=TradingView.STUDY_COUNT_LIMIT,e=(0,o.getConfig)(n.ProductFeatures.STUDY_ON_STUDY).limit),(0,r.showWarning)({title:i.t(null,void 0,s(533603)),text:i.t(null,void 0,s(470213)).format({number:e})})}},859261:(e,t,s)=>{"use strict";async function i(e){return(await Promise.all([s.e(70166),s.e(7566),s.e(9817),s.e(92191),s.e(34465),s.e(69121),s.e(66639),s.e(76592),s.e(88194),s.e(32109),s.e(87845),s.e(58755),s.e(61298),s.e(36088),s.e(39843),s.e(34873),s.e(13152),s.e(542),s.e(87689),s.e(97828),s.e(50690),s.e(25977),s.e(24377),s.e(93487),s.e(3914),s.e(11595),s.e(42292),s.e(53549),s.e(42067),s.e(68606)]).then(s.bind(s,460978))).createPhoneDialog(e)}async function o(e){
return(await Promise.all([s.e(70166),s.e(7566),s.e(9817),s.e(92191),s.e(34465),s.e(69121),s.e(66639),s.e(76592),s.e(88194),s.e(32109),s.e(87845),s.e(58755),s.e(61298),s.e(36088),s.e(39843),s.e(34873),s.e(13152),s.e(542),s.e(87689),s.e(97828),s.e(50690),s.e(25977),s.e(24377),s.e(93487),s.e(3914),s.e(11595),s.e(42292),s.e(53549),s.e(42067),s.e(68606)]).then(s.bind(s,460978))).createEmailDialog(e)}s.d(t,{createPhoneDialog:()=>i,createSMSEmailDialog:()=>o})},402243:(e,t,s)=>{"use strict";s.d(t,{verificationIsRequired:()=>d,whenVerified:()=>u});var i=s(777754),o=s(345848),n=s(859261),r=s(49437),a=s(244842),_=s(823127);let l=_.Deferred();function c(e,t){var s=TVSettings.getBool("_phone_verif_dlg_initial",!0);TVSettings.setValue("_phone_verif_dlg_initial",!1),(0,o.trackEvent)("Phone verification",e+(s?" initial":""),t)}function h(e){const t=_.Deferred();return(0,n.createPhoneDialog)({featureSource:e.source,doNotShowConfirmation:e.doNotShowConfirmation}).then((s=>{s.on("afterOpen",(()=>c("Show dialog",e.source))).on("verification:success",(s=>{t.resolve(s),c("Verified",e.source)})).on("verification:cancel",(()=>{t.reject("cancelled"),c("Cancelled",e.source)})).on("verification:codeExpired",(()=>c("Show dialog",e.source))).open()})),t}function d(e={}){return new Promise((t=>{!window.is_authenticated||user.is_staff||user.is_superuser||user.is_pro||user.is_moderator?t([!1]):e.customPhoneCheck?e.customPhoneCheck()?t([!0,"date-joined"]):t([!1]):a.enabled("phone_verification")&&!user.has_phone?e.isSuspiciousCountry?t([!0]):!0!==e.doNotCheckSocialActivity?t([!0,"date-joined"]):(!0!==e.doNotCheckSuspicious&&t([Boolean(r.TVLocalStorage.getItem("is_suspicious")),"suspicious"]),t([!0,"default"])):t([!1])}))}function u(e={}){const t=_.Deferred();return d({doNotCheckSuspicious:e.doNotCheckSuspicious,doNotCheckSocialActivity:e.doNotCheckSocialActivity,customPhoneCheck:e.customPhoneCheck,isSuspiciousCountry:e.isSuspiciousCountry}).then((([o,n])=>{if(!o)return l.resolve(),t.resolve();if(o&&e.silentPhoneVerification)return t.reject("phone_verification_required");if(!e.showDialog)return l.done((()=>t.resolve()));const r={source:e.source,doNotShowConfirmation:e.doNotShowConfirmation};"suspicious"!==n&&(r.topMessage=i.t(null,void 0,s(236640))),h(r).done((()=>t.resolve())).always((()=>t.reject("phone_verification_declined")))})).catch((e=>e)),t.promise()}window.loginStateChange&&loginStateChange.subscribe(null,(()=>{window.is_authenticated&&(l=_.Deferred(),d().then((([e,t])=>{e||l.resolve()})))}))},327034:(e,t,s)=>{"use strict";s.r(t),s.d(t,{QuoteTicker:()=>b});var i=s(329806),o=s(201089),n=s(389137),r=s(541346),a=s(497981),_=s(624444),l=s(943994),c=s(600303),h=s(719240),d=s(665570),u=s(876332),m=s(287102),f=s(113911);const p=(0,o.getLogger)("QuoteTicker"),g={addDescriptionTitle:!0,changeDirectionDownClass:"down",changeDirectionUpClass:"up",changeDirectionNeutralClass:"neutral",changeInBrackets:!1,changePercentInBrackets:!1,lastPriceTimeInBrackets:!0,rtcTimeInBrackets:!0,clientName:"quote-ticker",dontDyePrice:!1,fallingBg:null,growingBg:null,
lastFallingClass:"falling",lastGrowingClass:"growing",quoteSession:null,signNegative:!0,signPositive:!1,customPriceFormatter:null,customTimeFormatter:null,sessionStatusClassSuffix:"--for-ticker",dataModeClassSuffix:"--for-ticker",showInvalidSymbolStatus:!1,indicatorsTooltipType:"custom",lastPriceLastCharSup:!1,lastPriceHighlightDiffOnly:!1,initedHook:void 0,setStateHook:void 0,permissionDeniedHook:void 0,noSuchSymbolHook:void 0},y=String.fromCharCode(8198),v=/[K,M,B]/;function b(e,t,s={}){this.enabled=!0,this._symbol=e,this._symbolOriginal=null,this._options=(0,i.deepExtend)({},g,s),!1!==this._options.signNegative&&!0!==this._options.signNegative&&delete this._options.signNegative,s.customPriceFormatter&&(this._customPriceFormatter=s.customPriceFormatter),s.customTimeFormatter&&(void 0!==s.customTimeFormatter.lastPrice||void 0!==s.customTimeFormatter.rtc?this._timeFormatter=s.customTimeFormatter:this._timeFormatter={lastPrice:s.customPriceFormatter,rtc:s.customPriceFormatter}),this._percentFormatter=new r.PercentageFormatter,this._defaultPriceFormatter=new _.PriceFormatter(100),this._priceFormatter=this._customPriceFormatter||this._defaultPriceFormatter,this._volumeFormatter=new l.VolumeFormatter(2),this._cache={},this._lastPrice=null,this._lastPriceFormatted="",this._elements={},this._textNodes={},this._changeVolumeLetter=this._getChangeVolumeLetterCallback(),this._setElements(t),this._highlighters={},this._initHighlighters(),this._options.setStateHook&&this.setStateHook(this._options.setStateHook),this.quoteSession=this._options.quoteSession||(0,u.getQuoteSessionInstance)("simple"),this._quoteSessionEventHandler=this.onData.bind(this),this._connectTimeoutId=setTimeout(this.connect.bind(this),0)}function x(e){const t=e.search(v),s=t>=0?`${y}${e.slice(t)}`:"";return[t>0?e.substring(t,0):0===t?"":e,s]}function C(e,t,s,i,o){var n,r=null;function a(){if(n&&(clearTimeout(n),n=void 0),s||t)for(var r=0;r<e.length;r++)e[r].style.background="";if(!s||!t)for(r=0;r<e.length;r++)i&&e[r].classList.remove(i),o&&e[r].classList.remove(o)}return{show:function(_){var l=0;if(_!==r){if(null!==r&&null!==_&&(l=_-r),a(),n=setTimeout(a,750),0<l){if(t)for(var c=0;c<e.length;c++)e[c].style.background=t;else if(i)for(c=0;c<e.length;c++)e[c].classList.add(i)}else if(l<0)if(s)for(c=0;c<e.length;c++)e[c].style.background=s;else if(o)for(c=0;c<e.length;c++)e[c].classList.add(o);null!==_&&(r=_)}},hide:a}}b.prototype._setElements=function(e){this._container=e,this._elements.change=this._findElements(e,["js-symbol-change","symbol-change"]),this._elements.changeDirection=this._findElements(e,["js-symbol-change-direction","symbol-change-direction"]),this._elements.extHrsChangeDirection=this._findElements(e,["js-symbol-ext-hrs-change-direction"]),this._elements.changePercent=this._findElements(e,["js-symbol-change-pt","symbol-change-pt"]),this._elements.description=this._findElements(e,["js-symbol-description-name","symbol-description-name"]),this._elements.extHrsChange=this._findElements(e,"js-symbol-ext-hrs-change"),
this._elements.extHrsChangePercent=this._findElements(e,"js-symbol-ext-hrs-change-pt"),this._elements.extHrsClose=this._findElements(e,"js-symbol-ext-hrs-close"),this._elements.industry=this._findElements(e,["js-symbol-industry","symbol-industry"]),this._elements.last=this._findElements(e,["js-symbol-last","symbol-last"]),this._elements.sector=this._findElements(e,["js-symbol-sector","symbol-sector"]),this._elements.sessionStatus=this._findElements(e,"js-symbol-session-status"),this._elements.shortName=this._findElements(e,["js-symbol-short-name","symbol-short-name"]),this._elements.updateMode=this._findElements(e,"js-data-mode"),this._elements.updateMode.forEach((e=>e.classList.add("i-hidden"))),this._textNodes.change=this._getOrCreateTextNodes(this._elements.change),this._textNodes.changePercent=this._getOrCreateTextNodes(this._elements.changePercent),this._textNodes.extHrsChange=this._getOrCreateTextNodes(this._elements.extHrsChange),this._textNodes.extHrsChangePercent=this._getOrCreateTextNodes(this._elements.extHrsChangePercent),this._textNodes.extHrsClose=this._getOrCreateTextNodes(this._elements.extHrsClose),this._textNodes.last=this._getOrCreateTextNodes(this._elements.last),this._textNodes.open=this._findTextNodes(e,"js-symbol-open"),this._textNodes.eps=this._findTextNodes(e,"js-symbol-eps"),this._textNodes.marketCap=this._findTextNodes(e,"js-symbol-market-cap"),this._textNodes.prevClose=this._findTextNodes(e,"js-symbol-prev-close"),this._textNodes.dividends=this._findTextNodes(e,"js-symbol-dividends"),this._textNodes.priceEarnings=this._findTextNodes(e,"js-symbol-pe"),this._textNodes.volume=this._findTextNodes(e,"js-symbol-volume"),this._textNodes.high=this._findTextNodes(e,"js-symbol-high"),this._textNodes.low=this._findTextNodes(e,"js-symbol-low"),this._textNodes.currency=this._findTextNodes(e,"js-symbol-currency"),this._textNodes.lastPriceTime=this._findTextNodes(e,"js-symbol-lp-time"),this._textNodes.rtcTime=this._findTextNodes(e,"js-symbol-rtc-time"),this._elements.lastHighlight=this._options.lastPriceHighlightDiffOnly?this._elements.last.map((e=>this._appendAndGetNewElement(e,"span"))):this._elements.last,this._textNodes.lastHighlight=this._getOrCreateTextNodes(this._elements.lastHighlight),this._elements.lastSup=this._options.lastPriceLastCharSup?this._elements.lastHighlight.map((e=>this._appendAndGetNewElement(e,"sup"))):[],this._textNodes.lastSup=this._getOrCreateTextNodes(this._elements.lastSup)},b.prototype._findElements=function(e,t){var s=(0,n.isArray)(t)?t:[t];return Array.prototype.concat.apply([],s.map((t=>Array.prototype.slice.call(e.getElementsByClassName(t)))))},b.prototype._findTextNodes=function(e,t){return this._getOrCreateTextNodes(this._findElements(e,t))},b.prototype._getOrCreateTextNodes=function(e){return e.map((e=>{var t=this._getFirstTextNode(e);return t||(t=e.ownerDocument.createTextNode(""),e.appendChild(t)),t}))},b.prototype._appendAndGetNewElement=function(e,t){const s=document.createElement(t);return e.appendChild(s),s},b.prototype._getFirstTextNode=function(e){
for(var t=e.childNodes,s=t.length-1;s>=0;s--)if(3===t.item(s).nodeType)return t.item(s);return null},b.prototype.connect=function(e){this._subscribed||(this._subscribedSymbol=e||this._symbol,this.quoteSession.subscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!0)},b.prototype.disconnect=function(){clearTimeout(this._connectTimeoutId),this._subscribed&&(this.quoteSession.unsubscribe(this._options.clientName,this._subscribedSymbol,this._quoteSessionEventHandler),this._subscribed=!1)},b.prototype.onData=function(e,t){this.enabled&&("ok"===e.status?this.successData(e,t):"permission_denied"===e.status?this.onPermissionDenied(e):"error"===e.status&&this.errorData(e))},b.prototype.successData=function(e,t){e.values&&this.setState(e.values,e,t)},b.prototype.onPermissionDenied=function(e){(0,f.isSfQuoteData)(e)||(0,m.isMcxQuoteData)(e)?this._options.permissionDeniedHook?this._options.permissionDeniedHook(e,this._symbolOriginal||this._symbol):this.errorData(e):this.downgradeData(e)},b.prototype.errorData=function(e){this._options.showInvalidSymbolStatus&&(this.setShortName(this._symbol),this._elements.sessionStatus.map((e=>new c.MarketStatusIndicator({classSuffix:this._options.sessionStatusClassSuffix,el:e,data:{values:{current_session:"invalid"}},tooltipType:this._options.indicatorsTooltipType})))),this._options.noSuchSymbolHook?(this._symbolOriginal&&this.setShortName(this._symbolOriginal),this._options.noSuchSymbolHook.call(this,e,this._symbolOriginal||this._symbol)):p.logWarn("No data for: "+this._symbol)},b.prototype.downgradeData=function(e){{const t=e&&e.values&&e.values.alternative,s=this._symbol===t;if(!(t&&-1!==t.indexOf(":"))||s)return void this.errorData(e);this._symbolOriginal=this._symbol,this._symbol=t,this._subscribed=!1,this.connect()}},b.prototype.setState=function(e,t,s){const i=s.values;this._isVolumeFormat="volume"===e.format,null==i.pricescale&&null==i.minmov&&null==i.fractional&&null==i.minmove2||(this._priceFormatter=this._customPriceFormatter||this._isVolumeFormat&&this._volumeFormatter||new _.PriceFormatter(e.pricescale||100,e.minmov||1,e.fractional,e.minmove2));const o=this._options,n=this._percentFormatter,r=this._priceFormatter,a=this._defaultPriceFormatter,u=this._volumeFormatter;i.timezone&&this._timeFormatter&&(this._timeFormatter.lastPrice&&this._timeFormatter.lastPrice.setTimezone(i.timezone),this._timeFormatter.rtc&&this._timeFormatter.rtc.setTimezone(i.timezone));const m=(e,t=!0)=>t?`(${e})`:e,f=void 0!==o.signPositiveChange?o.signPositiveChange:o.signPositive,g=e=>{const t=r.format(e,f,void 0,o.signNegative);return m(t,o.changeInBrackets)},y=e=>{const t=n.format(e,f,void 0,o.signNegative);return m(t,o.changePercentInBrackets)},v=r.format.bind(r),b=a.format.bind(a),x=u.format.bind(u),C=e=>null==e?l.PLACE_HOLDER:b(e);o.disableChange||(this._setNodesValue(this._textNodes.change,i.change,g),this._setNodesValue(this._textNodes.changePercent,i.change_percent,y),
null!=i.change&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.change,this._elements.changePercent),i.change,o.changeUpFontColor,o.changeDownFontColor,o.changeNeutralFontColor),this._setChangeDirection(this._elements.changeDirection,i.change)),this._setNodesValue(this._textNodes.extHrsChange,i.rch,g),this._setNodesValue(this._textNodes.extHrsChangePercent,i.rchp,y),null!=i.rch&&(o.dontDyePrice||this._setChangeFontColor([].concat(this._elements.extHrsChange,this._elements.extHrsChangePercent),i.rch,o.changeUpFontColor,o.changeDownFontColor,o.changeNeutralFontColor),this._setChangeDirection(this._elements.extHrsChangeDirection,i.rch))),this._setNodesValue(this._textNodes.prevClose,i.prev_close_price,v),this._setNodesValue(this._textNodes.dividends,e.dividends_yield,(e=>null==e?l.PLACE_HOLDER:n.format(e,o.signPositive,void 0,o.signNegative)),!0);let N=(0,d.getTranslatedSymbolDescription)(i);if(N&&(N=this._prepareSymbolDescription(N),this._setTextsContent(this._elements.description,N),this._options.addDescriptionTitle))for(var S=0;S<this._elements.description.length;S++)this._elements.description[S].setAttribute("title",N);if((null!=i.short_name||null!=i.exchange)&&e.short_name){var T=e.short_name;"QUANDL"===e.exchange&&void 0!==e.short_name.split("/")[1]&&(T=e.short_name.split("/")[1]+", "+e.short_name.split("/")[0]),this.setShortName(T)}this._setLastValue(i.last_price,v),this._setNodesValue(this._textNodes.extHrsClose,i.rtc,v),i.rtc&&this._highlighters.extHrsClose.show(i.rtc),i.industry&&this._setTextsContent(this._elements.industry,e.industry,(e=>e)),i.sector&&this._setTextsContent(this._elements.sector,e.sector),this._elements.sessionStatus&&i.current_session&&(this._sessionStatusInstances?this._sessionStatusInstances.forEach((e=>e.setStatus(i.current_session))):this._sessionStatusInstances=this._elements.sessionStatus.map((t=>new c.MarketStatusIndicator({classSuffix:this._options.sessionStatusClassSuffix,el:t,short:!0,data:{values:i},quoteSession:this.quoteSession,symbol:e.original_name,manualUpdate:!0,tooltipType:this._options.indicatorsTooltipType})))),this._setNodesValue(this._textNodes.open,i.open_price,v),this._setNodesValue(this._textNodes.high,i.high_price,v),this._setNodesValue(this._textNodes.low,i.low_price,v),this._setNodesValue(this._textNodes.eps,e.earnings_per_share_basic_ttm,C,!0),this._setNodesValue(this._textNodes.priceEarnings,e.price_earnings_ttm,C,!0),this._setNodesValue(this._textNodes.marketCap,e.market_cap_basic,x,!0),this._setNodesValue(this._textNodes.volume,e.volume,x,!0);const k=i.currency_code||i.value_unit_id;if(k&&this._setNodesValue(this._textNodes.currency,"PCT"===k?"%":k,null,!0),(i.lp_time||i.timezone&&e.lp_time)&&this._textNodes.lastPriceTime.length&&(this._timeFormatter&&this._timeFormatter.lastPrice?this._setNodesValue(this._textNodes.lastPriceTime,m(this._timeFormatter.lastPrice.format(e.lp_time),this._options.lastPriceTimeInBrackets)):p.logError("last price time field requested with no formatter provided")),
(i.rtc_time||i.timezone&&e.rtc_time)&&this._textNodes.rtcTime.length&&(this._timeFormatter&&this._timeFormatter.rtc?this._setNodesValue(this._textNodes.rtcTime,m(this._timeFormatter.rtc.format(e.rtc_time),this._options.rtcTimeInBrackets)):p.logError("rtc time field requested with no formatter provided")),null!=i.last_price)for(S=0;S<this._elements.updateMode.length;S++)this._elements.updateMode[S].classList.remove("i-hidden");this._elements.updateMode&&(i.update_mode||i.update_mode_seconds)&&(this._updateModeInstances?this._updateModeInstances.forEach((t=>t.update({values:e}))):this._updateModeInstances=this._elements.updateMode.map((t=>new h.DataModeIndicator({classSuffix:this._options.dataModeClassSuffix,el:t,data:{values:e},modeInterval:e.update_mode_seconds,short:!0,tooltipType:this._options.indicatorsTooltipType})))),this._setStateHook&&this._setStateHook(t.values,s.values,t.complete),this._lastPrice?this._highlighters.last.show(e.last_price):null===this._lastPrice&&(this._container.classList.add("quote-ticker-inited"),"function"==typeof this._options.initedHook&&this._options.initedHook("last_price"in e)),this._lastPrice=e.last_price},b.prototype._setNodesValue=function(e,t,s,i){if(null!=t||i)for(var o="function"==typeof s?s(t):t,n=0;n<e.length;n++)e[n].nodeValue=o},b.prototype._setTextsContent=function(e,t,s){if(e&&e.length&&t)for(var i="function"==typeof s?s(t):t,o=0;o<e.length;o++)e[o].textContent=i},b.prototype._setLastValue=function(e,t){if(null==e)return;const s="function"==typeof t?t(e):String(e);if(s===this._lastPriceFormatted)return;const[i,o,n]=this._options.lastPriceHighlightDiffOnly?this._getLastValueStringDiff(this._lastPriceFormatted,s):["",s,""],r=i,[a,_]=this._options.lastPriceLastCharSup?[o.slice(0,-1),o.slice(-1)]:[o,""];this._options.lastPriceHighlightDiffOnly&&(this._isVolumeFormat&&this._changeVolumeLetter.call(this,n),this._setNodesValue(this._textNodes.last,r)),this._setNodesValue(this._textNodes.lastHighlight,a),this._setNodesValue(this._textNodes.lastSup,_),this._lastPriceFormatted=s},b.prototype._getChangeVolumeLetterCallback=function(){let e;return function(t){t!==e&&(e=t,this._elements.last.forEach((t=>{3!==t.childNodes.length?t.appendChild(document.createTextNode(e)):t.childNodes[2].nodeValue=e})))}},b.prototype._getLastValueStringDiff=function(e,t){if(e===t){const[e,s]=x(t);return[e,"",s]}let s=0;for(;e[s]===t[s];)s++;const[i,o]=x(t.slice(s));return[t.slice(0,s),i,o]},b.prototype._setChangeFontColor=function(e,t,s,i,o){for(var n=a.PriceColorer.formatSign(t,{up:s,down:i,neutral:o}),r=0;r<e.length;r++)e[r].style.color=n},b.prototype._setChangeDirection=function(e,t){for(var s=0;s<e.length;s++){var i=e[s].classList;i.toggle(this._options.changeDirectionUpClass,t>0),i.toggle(this._options.changeDirectionDownClass,t<0),i.toggle(this._options.changeDirectionNeutralClass,0===t)}},b.prototype.setShortName=function(e=""){this._setTextsContent(this._elements.shortName,e)},b.prototype._prepareSymbolDescription=function(e){var t=this._getCache("symbol-description:"+e);return t||(t=e,
this._setCache("symbol-description:"+e,t),t)},b.prototype._initHighlighters=function(){this._highlighters.last=new C(this._elements.lastHighlight,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass),this._highlighters.extHrsClose=new C(this._elements.extHrsClose,this._options.growingBg,this._options.fallingBg,this._options.lastGrowingClass,this._options.lastFallingClass)},b.prototype.disable=function(){this.enabled=!1,this.disconnect()},b.prototype.enable=function(){this.enabled=!0,this.connect()},b.prototype.setStateHook=function(e){null===e&&this._setStateHook?delete this._setStateHook:"function"==typeof e&&(this._setStateHook=e)},b.prototype._setCache=function(e,t){null==t?delete this._cache[e]:this._cache[e]=t},b.prototype._getCache=function(e){return this._cache&&this._cache[e]}}}]);