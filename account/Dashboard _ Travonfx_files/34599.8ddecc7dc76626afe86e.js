"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[34599],{975420:(e,t,n)=>{n.d(t,{initGA:()=>c,trackTiming:()=>u});var o=n(251954),i=n(261030),r=n(588948),a=n(638456),l=n(691805);let s=!1;function c(){if(s)return;(0,r.updateInitData)();const e=(0,r.getInitData)();if(!e.gaId)return void(window.gtag=()=>{});s=!0,(0,l.appendScript)(`https://www.googletagmanager.com/gtag/js?id=${(0,r.getInitData)().gaId}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const t={anonymize_ip:!0};window.TVD&&(t.app_name="TVD",t.app_version=(0,a.desktopAppVersion)()),e.gaVars&&window.gtag("set",e.gaVars),window.gtag("consent","default",{analytics_storage:(0,i.getCookieSetting)(i.CookieSettings.Analytics)?"granted":"denied"}),window.gtag("config",e.gaId,t),o.subscribe(i.cookieSettingsChangeEvent,((e,t)=>{e===i.CookieSettings.Analytics&&window.gtag("consent","update",{analytics_storage:t?"granted":"denied"})}),null)}function u(e,t,n,o){c(),window.gtag("event","timing_complete",{name:t,value:n,event_category:e,event_label:o})}},304986:(e,t,n)=>{n.d(t,{getThemeFromUserSettings:()=>r,saveThemeInUserSettings:()=>a});var o=n(62802),i=n(278855);function r(){return(0,i.getThemeFromCookie)()||(0,o.getValue)("current_theme.name")||null}function a(e){(0,i.setThemeToCookie)(e),(0,o.setValue)("current_theme.name",e,{forceFlush:!0})}},429874:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_THEME:()=>c.DEFAULT_THEME,extractThemeFromModel:()=>P,getCurrentTheme:()=>h,getStdTheme:()=>A,getStdThemeNames:()=>w,getStdThemedValue:()=>T,getTheme:()=>y,getThemeNames:()=>b,getThemedColor:()=>p,isPublicTheme:()=>d,isStdTheme:()=>N,isStdThemeName:()=>f,isStdThemedDefaultValue:()=>_,isThemeExist:()=>C,loadTheme:()=>g,removeTheme:()=>E,restoreTheme:()=>m,saveTheme:()=>M,savedThemeName:()=>v,syncTheme:()=>S,themes:()=>u.themes,translateStdThemeName:()=>k});var o=n(724377),i=n(42292),r=n(304986);const a=n(787703);var l=n(86746),s=n(331633),c=n(484400),u=n(424450);function d(e){return!e.isPrivate}function h(){return u.themes[s.watchedTheme.value()]||u.themes[c.DEFAULT_THEME]}function p(e){return h().getThemedColor(e)}async function g(e,t){const{themeName:n,standardTheme:o,syncState:r=!0,noUndo:a=!1,applyOverrides:l=!1,onlyActiveChart:s=!1}=t,c=await(o?Promise.resolve(A(n)):y(n)),u=!o;if(void 0!==c.content){const t=!o||s;l&&(void 0!==(d=c.content).chartProperties&&(0,i.applyDefaultsOverrides)(d.chartProperties),void 0!==d.mainSourceProperties&&(0,i.applyDefaultsOverrides)(d.mainSourceProperties,void 0,!0,"mainSeriesProperties")),await e.applyTheme({theme:c.content,onlyActiveChart:t,restoreNonThemeDefaults:u,themeName:n,standardTheme:o,syncState:r,noUndo:a})}var d;return c}function m(){(0,s.setTheme)((0,r.getThemeFromUserSettings)()||c.DEFAULT_THEME)}function v(){return(0,r.getThemeFromUserSettings)()}function S(){(0,r.saveThemeInUserSettings)(h().name)}function y(e){return a.loadTheme(e)}function b(){return a.loadThemes()}function w(){return l.getStdThemeNames()}function f(e){
return w().includes(e)}function A(e){return l.getStdChartTheme(e)||{content:void 0}}function T(e,t){const n=t||h().name,o=l.getStdChartTheme(n),i=0!==e.length&&e.split(".");return o&&o.content&&i?i.reduce(((e,t)=>e[t]),o.content):null}function _(e,t,n){const i=T(e,n);return null!==i&&(0,o.areEqualRgba)((0,o.parseRgba)(i),(0,o.parseRgba)(String(t)))}function M(e,t){return a.saveTheme(e,t)}function E(e){return a.removeTheme(e)}function C(e){return a.isThemeExist(e)}function k(e){return l.translateThemeName(e)}function N(e){return l.isStdTheme(e)}function P(e){return{content:{chartProperties:{paneProperties:e.model().properties().childs().paneProperties.state(),scalesProperties:e.model().properties().childs().scalesProperties.state()},sessions:e.model().sessions().properties().state(),mainSourceProperties:e.model().mainSeries().properties().state(),version:e.model().version()}}}},72368:(e,t,n)=>{n.d(t,{canShowNewSymbolSearch:()=>s,getCurrentLocaleInfoCountry:()=>c,isMobile:()=>a,isPlatformMobile:()=>l});var o=n(314802),i=n(244842),r=n(638456);function a(){const e=window.matchMedia("(min-width: 602px) and (min-height: 445px)").matches;return r.CheckMobile.any()&&!e}function l(){return!(0,o.isOnMobileAppPage)("any")&&a()}function s(){return!i.enabled("widget")&&!(0,o.isOnMobileAppPage)("any")}function c(){var e,t;return null===(t=null===(e=window.initData)||void 0===e?void 0:e.currentLocaleInfo)||void 0===t?void 0:t.flag.toUpperCase()}},515828:(e,t,n)=>{n.d(t,{MINDS_GROUP_PATH_PATTERN:()=>o,mindsPathToGroup:()=>i});const o="/minds/groups/:symbol/";function i(e){return o.replace(":symbol",encodeURIComponent(e))}},951713:(e,t,n)=>{n.d(t,{getHideOptions:()=>u,getSavedHideMode:()=>h,toggleHideMode:()=>d});var o=n(650151),i=n(777754),r=n(62802),a=n(439016),l=n(885482),s=n(597101);let c=null;function u(){if(null!==c)return c;const e=(0,a.tradingService)();return c=new Map([["drawings",{label:i.t(null,void 0,n(413277)),dataName:"hide-drawing-tools",tooltip:{active:i.t(null,void 0,n(998116)),inactive:i.t(null,void 0,n(895551))},getBoxedValue:()=>(0,l.hideAllDrawings)(),trackLabel:"hide drawings"}],["indicators",{label:i.t(null,void 0,n(44177)),dataName:"hide-indicators",tooltip:{active:i.t(null,void 0,n(249982)),inactive:i.t(null,void 0,n(986306))},getBoxedValue:()=>(0,l.hideAllIndicators)(),trackLabel:"hide indicators"}],["positions",{label:i.t(null,void 0,n(190540)),dataName:"hide-positions-and-orders",tooltip:{active:i.t(null,void 0,n(262632)),inactive:i.t(null,void 0,n(770803))},getBoxedValue:()=>(0,o.ensureNotNull)(e).showTradedSources,inverted:!0,trackLabel:"hide positions"}],["all",{label:i.t(null,void 0,n(133911)),dataName:"hide-all",tooltip:{active:e?i.t(null,void 0,n(538293)):i.t(null,void 0,n(839046)),inactive:e?i.t(null,void 0,n(67927)):i.t(null,void 0,n(44312))},trackLabel:"hide all"}]]),e||c.delete("positions"),c}function d(e){e?r.setValue("ChartToolsHideMode",e):e=h();const t=p();let n=!t;return"all"===e?(g(((e,t,o)=>{e.setValue(o?!n:n)})),s.hideStateChange.fire({hideMode:e,isActive:n}),n):(g(((o,i,r)=>{if(i===e){
const e=t?!r:!o.value();o.setValue(e),n=r?!e:e}else o.setValue(Boolean(r))})),s.hideStateChange.fire({hideMode:e,isActive:n}),n)}function h(){const e=r.getValue("ChartToolsHideMode","drawings");return u().has(e)?e:"drawings"}function p(){let e=!0;return g(((t,n,o)=>{const i=t.value();e=e&&(o?!i:i)})),e}function g(e){u().forEach(((t,n)=>{var o;const i=null===(o=t.getBoxedValue)||void 0===o?void 0:o.call(t);i&&e(i,n,t.inverted)}))}},738600:(e,t,n)=>{n.d(t,{logger:()=>o});const o=(0,n(201089).getLogger)("Platform.Model.Watchlist")},621618:(e,t,n)=>{n.d(t,{ActionsProvider:()=>Yn,createActionAddAlert:()=>Fn,createActionCopyPrice:()=>Rn,createActionTrade:()=>Gn,createChangeIntervalsVisibilitiesAction:()=>Un,createLinesAction:()=>Bn,createMTPredictorActions:()=>Hn,createPasteAction:()=>On,createSyncDrawingActions:()=>jn,createVisualOrderAction:()=>Vn,defaultContextMenuOptions:()=>Wn});var o=n(650151),i=n(201089),r=n(960521),a=n(389137),l=n(777754),s=n(244842),c=n(373571),u=n(608415),d=n(175070),h=n(982217),p=n(161488),g=n(794349),m=n(345848),v=n(939243),S=n(429589),y=n(158566),b=n(772466),w=n(827710),f=n(439016),A=n(406849),T=n(454984),_=n(778737),M=n(674053),E=n(145329),C=n(516684),k=n(922850),N=n(985139),P=n(91849),I=n(606271),L=n(702236),x=n(381554),W=n(108218),D=n(726778),F=n(709081),G=n(711496),O=n(834075),V=n(125226),U=n(526075),R=n(860037),H=n(500521),B=n(263955),j=n(921692),K=n(454373),Y=n(314802),z=n(638456),Z=n(453817),q=n(470316),$=n(104436),J=n(7195),X=n(943855),Q=n(519073),ee=n(27005),te=n(568247),ne=n(356893),oe=n(713473),ie=n(981107),re=n(167975),ae=n(809796),le=n(885482),se=n(223699),ce=n(395098),ue=n(793993),de=n(62745),he=n(354950),pe=n.n(he);const ge=(0,
i.getLogger)("Chart.ActionsProvider"),me=new ae.TranslatedString("show alert label lines",l.t(null,void 0,n(916237))),ve=new ae.TranslatedString("hide alert label lines",l.t(null,void 0,n(491842))),Se=new ae.TranslatedString("change visibility",l.t(null,void 0,n(521511))),ye=new ae.TranslatedString("pin to scale {label}",l.t(null,void 0,n(156015))),be=new ae.TranslatedString("pin to right scale",l.t(null,void 0,n(22615))),we=new ae.TranslatedString("pin to left scale",l.t(null,void 0,n(84018))),fe=new ae.TranslatedString("change earnings visibility",l.t(null,void 0,n(88217))),Ae=new ae.TranslatedString("change dividends visibility",l.t(null,void 0,n(184944))),Te=new ae.TranslatedString("change splits visibility",l.t(null,void 0,n(374488))),_e=new ae.TranslatedString("change continuous contract switch visibility",l.t(null,void 0,n(407017))),Me=new ae.TranslatedString("change futures contract expiration visibility",l.t(null,void 0,n(628288))),Ee=new ae.TranslatedString("change latest news and Minds visibility",l.t(null,void 0,n(819839))),Ce=new ae.TranslatedString("show all ideas",l.t(null,void 0,n(813622))),ke=new ae.TranslatedString("show ideas of followed users",l.t(null,void 0,n(826267))),Ne=new ae.TranslatedString("show my ideas only",l.t(null,void 0,n(740061))),Pe=new ae.TranslatedString("change events visibility on chart",l.t(null,void 0,n(979574))),Ie=new ae.TranslatedString("add this symbol to entire layout",l.t(null,void 0,n(527982))),Le=new ae.TranslatedString("add this indicator to entire layout",l.t(null,void 0,n(182388))),xe=new ae.TranslatedString("add this strategy to entire layout",l.t(null,void 0,n(894292))),We=new ae.TranslatedString("add this financial metric to entire layout",l.t(null,void 0,n(422856))),De=new ae.TranslatedString("apply drawing template",l.t(null,void 0,n(349037))),Fe=new ae.TranslatedString("lock objects",l.t(null,void 0,n(168163))),Ge=new ae.TranslatedString("unlock objects",l.t(null,void 0,n(766824))),Oe=new ae.TranslatedString("change visibility at current interval and above",l.t(null,void 0,n(678422))),Ve=new ae.TranslatedString("change visibility at current interval and below",l.t(null,void 0,n(249529))),Ue=new ae.TranslatedString("change visibility at current interval",l.t(null,void 0,n(416698))),Re=new ae.TranslatedString("change visibility at all intervals",l.t(null,void 0,n(666927))),He=l.t(null,void 0,n(108700)),Be=l.t(null,void 0,n(764615)),je=l.t(null,void 0,n(107005)),Ke=(0,re.appendEllipsis)(l.t(null,void 0,n(893512))),Ye=l.t(null,void 0,n(727558)),ze=l.t(null,void 0,n(287085)),Ze=(0,
re.appendEllipsis)(l.t(null,void 0,n(952302))),qe=l.t(null,void 0,n(581428)),$e=l.t(null,void 0,n(831971)),Je=l.t(null,void 0,n(311156)),Xe=l.t(null,void 0,n(615682)),Qe=l.t(null,void 0,n(266631)),et=l.t(null,void 0,n(737422)),tt=l.t(null,void 0,n(805716)),nt=l.t(null,void 0,n(650352)),ot=l.t(null,void 0,n(819263)),it=l.t(null,void 0,n(615818)),rt=l.t(null,void 0,n(705897)),at=l.t(null,void 0,n(958976)),lt=l.t(null,void 0,n(611661)),st=l.t(null,void 0,n(466560)),ct=l.t(null,void 0,n(953958)),ut=l.t(null,void 0,n(734150)),dt=l.t(null,void 0,n(783927)),ht=l.t(null,void 0,n(315644)),pt=l.t(null,void 0,n(442660)),gt=l.t(null,void 0,n(844788)),mt=l.t(null,void 0,n(770437)),vt=l.t(null,void 0,n(571263)),St=l.t(null,void 0,n(370573)),yt=l.t(null,void 0,n(259560)),bt=l.t(null,void 0,n(514125)),wt=l.t(null,void 0,n(444538)),ft=l.t(null,void 0,n(556948)),At=l.t(null,void 0,n(920207)),Tt=l.t(null,void 0,n(665810)),_t=l.t(null,void 0,n(603822)),Mt=l.t(null,void 0,n(697324)),Et=l.t(null,void 0,n(500764)),Ct=l.t(null,void 0,n(708128)),kt=l.t(null,void 0,n(361201)),Nt=l.t(null,void 0,n(832156)),Pt=l.t(null,void 0,n(591130)),It=l.t(null,void 0,n(737680)),Lt=l.t(null,void 0,n(243707)),xt=l.t(null,void 0,n(739065)),Wt=l.t(null,void 0,n(454727)),Dt=l.t(null,void 0,n(366156)),Ft=l.t(null,void 0,n(976598)),Gt=l.t(null,void 0,n(203485)),Ot=l.t(null,void 0,n(745828)),Vt=l.t(null,void 0,n(702899)),Ut=l.t(null,void 0,n(640887)),Rt=l.t(null,void 0,n(753387)),Ht=l.t(null,void 0,n(796712)),Bt=l.t(null,void 0,n(126354)),jt=l.t(null,void 0,n(219796)),Kt=l.t(null,void 0,n(559901)),Yt=l.t(null,void 0,n(223221)),zt=l.t(null,void 0,n(422198)),Zt=l.t(null,void 0,n(127557)),qt=l.t(null,void 0,n(598486)),$t=l.t(null,void 0,n(973106)),Jt=l.t(null,void 0,n(85964)),Xt=l.t(null,void 0,n(559192)),Qt=l.t(null,void 0,n(583182)),en=(0,re.appendEllipsis)(l.t(null,void 0,n(592206))),tn=(0,re.appendEllipsis)(l.t(null,void 0,n(303612))),nn=(0,re.appendEllipsis)(l.t(null,void 0,n(389517))),on=l.t(null,void 0,n(813345)),rn=(0,re.appendEllipsis)(l.t(null,void 0,n(309908))),an=l.t(null,void 0,n(35216)),ln=l.t(null,void 0,n(552977)),sn=l.t(null,void 0,n(419611)),cn=l.t(null,void 0,n(738342)),un=l.t(null,void 0,n(715101)),dn=l.t(null,void 0,n(642284)),hn=l.t(null,void 0,n(246771)),pn=l.t(null,void 0,n(966263)),gn=l.t(null,void 0,n(830816)),mn=l.t(null,void 0,n(124620)),vn=l.t(null,void 0,n(484813)),Sn=l.t(null,void 0,n(772973)),yn=l.t(null,void 0,n(748284)),bn=l.t(null,void 0,n(487933)),wn=l.t(null,void 0,n(258669)),fn=(0,re.appendEllipsis)(l.t(null,void 0,n(389517))),An=l.t(null,void 0,n(308251)),Tn=l.t(null,void 0,n(34059)),_n=l.t(null,void 0,n(364288)),Mn=l.t(null,void 0,n(777920)),En=l.t(null,void 0,n(575669)),Cn=l.t(null,void 0,n(608886)),kn=l.t(null,void 0,n(618008)),Nn=l.t(null,void 0,n(733606)),Pn=(0,re.appendEllipsis)(l.t(null,void 0,n(665986))),In=(0,re.appendEllipsis)(l.t(null,void 0,n(218001))),Ln=l.t(null,void 0,n(729682)),xn=l.t(null,void 0,n(28851)),Wn={general:!0,mainSeries:!0,mainSeriesTrade:!1,esdStudies:!0,studies:!0,fundamentals:!0,lineTools:!0,
publishedCharts:!0,ordersAndPositions:!0,alerts:!0,chartEvents:!0,objectTree:!0,gotoLineTool:!1};function Dn(e){return(0,ie.isActingAsSymbolSource)(e)?e.symbolTitle(h.TitleDisplayTarget.StatusLine,!0,!0):e.title(h.TitleDisplayTarget.StatusLine,!0)}function Fn(e,t){var n,i;const r=e.model().model();if(r.isInReplay())return null;if(r.mainSeries().isConvertedToOtherCurrency()||r.mainSeries().isConvertedToOtherUnit())return null;let a={},l=He,s=null,c=null;const u=null!==(n=t.series)&&void 0!==n?n:null===(i=t.pane)||void 0===i?void 0:i.mainDataSource();return u?c=function(e,t,n){const o=e.symbolSource();if(o&&(o.isConvertedToOtherCurrency()||o.isConvertedToOtherUnit()))return null;let i,r;const a=(0,p.isStudy)(e)?"ContextMenuStudy":e===t?"ContextMenuSeries":null,l=e.priceScale()||t.priceScale(),s=e.firstValue(),c=l.isPercentage()?e:l;if(void 0!==n&&null!==s)i=l.coordinateToPrice(n,s);else if(e===t)i=t.lastValueData(4,!0,!0).price;else if((0,p.isStudy)(e)){const t=e.defaultPlotIdForAlert();i=null===t?void 0:e.lastValueData(t,!0,!0).price}r=void 0!==i&&(0,I.isFirstAlertPlotUsual)(e)?je.format({title:Dn(e),price:c.formatter().format(i)}):Be.format({title:Dn(e)});return{label:r,trackEventLabel:a,alertEditorOptions:{series:e,value:i}}}(u,r.mainSeries(),t.localY):t.drawing&&(c=function(e){const t=(0,o.ensureNotNull)(e.ownerSource());if(!t.alertCreationAvailable().value())return null;const n=t.symbolSource();if(n&&(n.isConvertedToOtherCurrency()||n.isConvertedToOtherUnit()))return null;return{label:Be.format({title:e.title(h.TitleDisplayTarget.StatusLine)}),trackEventLabel:"ContextMenuDrawing",alertEditorOptions:{drawing:e}}}(t.drawing)),!c&&t.drawing?null:(c&&(a=c.alertEditorOptions,l=c.label,s=c.trackEventLabel),l=(0,re.appendEllipsis)(l),new y.TVActionAsync((()=>(a.series?(0,D.hasUserAccessToDataSource)(a.series):Promise.resolve(!0)).then((e=>{const t={label:l,icon:x,statName:"AddAlert"};return e?{...t,shortcutHint:(0,q.humanReadableHash)(q.Modifiers.Alt+65),onExecute:()=>{null!==s&&((0,m.trackEvent)("GUI","CreateAlert",s),s=null),window.runOrSignIn((()=>{(0,S.invokeAlertEditorWithOnlineSeries)({...a,dataSourceHub:r,actionSource:"pane_context_menu_add_alert"})}),{source:"Alert add from pane context menu",sourceMeta:"Chart"})}}:{...t,disabled:!0}})))))}function Gn(e,t,n){if(e.model().isInReplay())return null;const o=e.model().mainSeries();return o.isConvertedToOtherCurrency()||o.isConvertedToOtherUnit()?null:new c.ActionAsync("Trading.TradeFromChart",(()=>{const t=new Promise(((t,o)=>{const i=(0,f.tradingService)();if(null===i||0===i.brokersList().length)return void t({label:ze,disabled:!0});const r=e.model().mainSeries();let a;n&&(a=n.localY),(0,A.createTradeContext)(r,a).then((e=>{try{return i.chartContextMenuActions(e,{hideNotExecutableAction:!0})}catch(e){return ge.logError(e.message),[]}})).then((e=>{0!==e.length?t({name:"trade",label:ze,subItems:e,statName:"Trading"}):t({label:ze,disabled:!0})})).catch((()=>{o("Unable to get Trade Context")}))}));return(0,T.makeTimeLimited)(t,5e3,"Action trade not received")}))}
function On(e,t){return!t.isEmpty()&&s.enabled("datasource_copypaste")?new c.Action({actionId:"Chart.Clipboard.PasteSource",label:Ln.trim(),shortcutHint:(0,q.humanReadableHash)(q.Modifiers.Mod+86),statName:"Paste",onExecute:()=>e.chartWidgetCollection().clipboard.uiRequestPaste(t)}):null}function Vn(e,t){const o=e.model(),i=o.availableZOrderOperations(t),r=[new c.Action({actionId:"Chart.Source.VisualOrder.BringToFront",label:Bt,statName:"BringToFront",disabled:!i.bringToFrontEnabled,onExecute:()=>o.bringToFront(t)}),new c.Action({actionId:"Chart.Source.VisualOrder.SendToBack",label:jt,statName:"SendToBack",disabled:!i.sendToBackEnabled,onExecute:()=>o.sendToBack(t)}),new c.Action({actionId:"Chart.Source.VisualOrder.BringForward",label:Kt,statName:"BringForward",disabled:!i.bringForwardEnabled,onExecute:()=>o.bringForward(t)}),new c.Action({actionId:"Chart.Source.VisualOrder.SendBackward",label:Yt,statName:"SendBackward",disabled:!i.sendBackwardEnabled,onExecute:()=>o.sendBackward(t)})];return new c.Action({actionId:"Chart.Source.VisualOrder",label:zt,icon:n(677067),statName:"VisualOrder",subItems:r})}function Un(e,t){const n=e.model(),o=(e,o)=>{const i=se.Interval.parse(n.mainSeries().interval()),r=(0,ce.getIntervalsVisibilitiesForMode)(i,e),a=[],l=[];t.forEach((e=>{const t=e.properties().intervalsVisibilities.childs();a.push(t.ticks),l.push(r.ticks),a.push(t.seconds),l.push(r.seconds),a.push(t.secondsFrom),l.push(r.secondsFrom),a.push(t.secondsTo),l.push(r.secondsTo),a.push(t.minutes),l.push(r.minutes),a.push(t.minutesFrom),l.push(r.minutesFrom),a.push(t.minutesTo),l.push(r.minutesTo),a.push(t.hours),l.push(r.hours),a.push(t.hoursFrom),l.push(r.hoursFrom),a.push(t.hoursTo),l.push(r.hoursTo),a.push(t.days),l.push(r.days),a.push(t.daysFrom),l.push(r.daysFrom),a.push(t.daysTo),l.push(r.daysTo),a.push(t.weeks),l.push(r.weeks),a.push(t.weeksFrom),l.push(r.weeksFrom),a.push(t.weeksTo),l.push(r.weeksTo),a.push(t.months),l.push(r.months),a.push(t.monthsFrom),l.push(r.monthsFrom),a.push(t.monthsTo),l.push(r.monthsTo),a.push(t.ranges),l.push(r.ranges)})),n.setProperties(a,l,o)},i=[new c.Action({actionId:"Chart.Source.IntervalsVisibility.CurrentAndAbove",label:qt,statName:"currentAndAboveIntervals",onExecute:()=>o(3,Oe)}),new c.Action({actionId:"Chart.Source.IntervalsVisibility.CurrentAndBelow",label:$t,statName:"currentAndBelowIntervals",onExecute:()=>o(2,Ve)}),new c.Action({actionId:"Chart.Source.IntervalsVisibility.Current",label:Jt,statName:"currentInterval",onExecute:()=>o(1,Ue)}),new c.Action({actionId:"Chart.Source.IntervalsVisibility.All",label:Xt,statName:"allIntervals",onExecute:()=>o(0,Re)})];return new c.Action({actionId:"Chart.Source.IntervalsVisibility",label:Zt,statName:"IntervalsVisibility",subItems:i})}function Rn(e,t){var n,o,i;const r=e.defaultPriceScale(),a=void 0!==t?r.coordinateToPrice(t,null!==(o=null===(n=e.mainDataSource())||void 0===n?void 0:n.firstValue())&&void 0!==o?o:0):e.model().mainSeries().lastValueData(4,!0,!0).price,l=null===(i=e.mainDataSource())||void 0===i?void 0:i.formatter()
;if(void 0===a||!l)return null;const s=l.format(a);return new c.Action({actionId:"Chart.Clipboard.CopyPrice",label:`${xn} ${s}`,statName:"CopyPrice",onExecute:()=>(0,ue.getClipboard)().writeText(s)})}function Hn(e,t,n,i){const r=(r,a,l)=>new y.TVAction({label:r,onExecute:()=>{const r=e.model(),s=r.model().timeScale(),c=t.defaultPriceScale();if(!s.isEmpty()&&!c.isEmpty())if(l&&void 0!==n&&void 0!==i){const e=(0,o.ensureNotNull)((0,o.ensureNotNull)(t.mainDataSource()).firstValue()),l=c.coordinateToPrice(n,e),u=Math.round(s.coordinateToIndex(i));r.createLineTool({pane:t,point:{index:u,price:l},linetool:a})}else le.tool.setValue(a)}});return new y.TVAction({label:Je,subItems:[r(Xe,"LineStudyMtpRiskReward",!1),r(Qe,"LineStudyMtpDecisionPoint",!0),r(et,"LineStudyMtpAnalysis",!0),new y.TVAction({label:tt,subItems:[r(nt,"LineStudyMtpElliotWaveMain",!0),r(ot,"LineStudyMtpElliotWaveMajor",!0),r(it,"LineStudyMtpElliotWaveMinor",!0)]}),new y.TVAction({label:rt,subItems:[r(at,"LineStudyMtpUpWave1OrA",!1),r(lt,"LineStudyMtpUpWave2OrB",!1),r(st,"LineStudyMtpUpWaveC",!1),r(ct,"LineStudyMtpUpWave3",!1),r(ut,"LineStudyMtpUpWave4",!1),r(dt,"LineStudyMtpUpWave5",!1)]}),new y.TVAction({label:ht,subItems:[r(pt,"LineStudyMtpDownWave1OrA",!1),r(gt,"LineStudyMtpDownWave2OrB",!1),r(mt,"LineStudyMtpDownWaveC",!1),r(vt,"LineStudyMtpDownWave3",!1),r(St,"LineStudyMtpDownWave4",!1),r(yt,"LineStudyMtpDownWave5",!1)]})]})}function Bn(e){const t=e.actions(),n=[t.showPriceLine];return n.push(t.showSeriesPrevCloseLine),n.push(t.showPrePostMarketPriceLine),n.push(t.showHighLowPriceLines),e.model().model().hasCustomSource("bidask")&&n.push(t.showBidAskLines),new c.Action({actionId:"Chart.Lines",label:Qt,statName:"Lines",subItems:n})}function jn(e,t){const n=[];{if(le.isToolCreatingNow.value())return n;const o=()=>{var t;return null!==(t=e.chartWidgetCollection().activeChartWidget.value())&&void 0!==t?t:e},i=()=>t.some((e=>e.isSynchronizable()));if((0,V.isFeatureEnabled)("save_shared_line_tools")){if(!window.user.is_pro)return n;if(!i())return n;let o=t[0].sharingMode().value();o=t.every((e=>e.sharingMode().value()===o))?o:null;const r=e.model();n.push(new c.Separator,new y.TVAction({label:Cn,statName:"NoSyncDrawing",checkable:!0,checked:0===o,onExecute:e=>{e.isChecked()&&r.shareLineTools(t,0)}}),new y.TVAction({label:kn,statName:"SyncDrawingInLayout",checkable:!0,checked:1===o,onExecute:e=>{e.isChecked()&&r.shareLineTools(t,1)}}),new y.TVAction({label:Nn,statName:"SyncDrawingGlobally",checkable:!0,checked:2===o,onExecute:e=>{e.isChecked()&&r.shareLineTools(t,2)}}))}else if(s.enabled("support_multicharts")&&e.isMultipleLayout().value()){if(!i())return n;const e=t.every((e=>!!e.linkKey().value()));n.push(new c.Separator,new c.Action({actionId:"Chart.LineTool.NoSync",label:Cn,statName:"NoSyncDrawing",checkable:!0,checked:!e,onExecute:e=>{e.isChecked()&&o().unlinkSelectedLine()}}),new c.Action({actionId:"Chart.LineTool.SyncInLayout",label:kn,statName:"SyncDrawingInLayout",checkable:!0,checked:e,onExecute:e=>{e.isChecked()&&o().copyLineToOtherCharts()}}))}}
return n}function Kn(){var e,t;return!(0,z.onWidget)()&&!(0,Y.isOnMobileAppPage)("any")&&!!(null===(t=null===(e=window.widgetbar)||void 0===e?void 0:e.layout)||void 0===t?void 0:t.canOpen())}class Yn{constructor(e,t){this._chartWidget=e,this._options=(0,a.merge)((0,a.clone)(Wn),t||{})}async contextMenuActionsForSources(e,t,n){const o=e[0],i=this._options;if(o===this._chartWidget.model().mainSeries()&&i.mainSeries)return this._contextMenuActionsForSeries(o,t);if((0,p.isESDStudy)(o)&&i.esdStudies)return this._contextMenuActionsForESD();if((0,p.isRollDatesStudy)(o))return this._contextMenuActionsForRollDates();if((0,j.isFuturesContractExpiration)(o))return this._contextMenuActionsForFuturesContractExpiration();if((0,K.isLatestUpdatesSource)(o))return this._contextMenuActionsForisLatestUpdates();if((0,p.isStudy)(o)&&i.studies)return this._contextMenuActionsForStudy(o,t);if(o instanceof k.PublishedChartsTimeline&&i.publishedCharts)return this._contextMenuActionsForPublishedTimeline(o);if((o instanceof _.LineToolOrder||o instanceof M.LineToolPosition)&&i.ordersAndPositions)return this._contextMenuActionsForTradingDrawings(o);if((0,P.isAlertLabel)(o)&&o.alert().id().value()&&i.alerts)return this._contextMenuActionsForAlertLabel(o.alert(),n);if((0,oe.isLineTool)(o)&&i.lineTools){const t=e.filter(oe.isLineTool);return this._contextMenuActionsForLineTool(t)}return o instanceof L.ChartEventsSource&&i.chartEvents?this._contextMenuActionsForChartEvents(o):[]}_isReadOnly(){return this._chartWidget.readOnly()}_createActionHide(e){return new c.Action({actionId:"Chart.SelectedObject.Hide",label:$e,icon:n(484959),statName:"HideSelectedObject",onExecute:this._chartWidget.hideDataSources.bind(this._chartWidget,[e])})}_createActionShow(e){const t=new c.Action({actionId:"Chart.SelectedObject.Show",checkable:!0,label:qe,icon:n(416911),statName:"ToggleShow"}),o=new u.ActionBinder(t,e.properties().visible,this._chartWidget.model(),Se);return t.setBinding(o),o.setValue(e.properties().visible.value()),t}_createActionScale(e){const t=(0,o.ensureNotNull)(e.priceScale()),i=this._chartWidget.model().model(),r=(0,o.ensureNotNull)(i.paneForSource(e)),a=r.priceScalePosition(t),l=("left"===a?r.leftPriceScales():r.rightPriceScales()).indexOf(t),s=i.priceScaleSlotsCount().totallySlots<2?"dontneedname":"needname",u="overlay"===a?"":(0,d.getPriceAxisNameInfo)(a,l).label,h=xt.format({label:u}),p={"left-needname":h,"left-dontneedname":Dt,"right-needname":h,"right-dontneedname":Ft,"overlay-needname":Wt,"overlay-dontneedname":Wt}[a+"-"+s];return new c.Action({actionId:"Chart.Source.ChangePriceScale",label:p,icon:n(225191),subItems:this._createActionScaleItems(e)})}_createActionResetInputPoints(e){const t=e.metaInfo(),o=t.inputs.filter(de.isTimeOrPriceNotHiddenInput);return 0===o.length?null:new c.Action({actionId:"Chart.Source.ResetInputPoints",label:In,onExecute:async()=>{let i;try{const r=e.properties().childs().inputs.state();for(const e of Object.keys(r))o.find((t=>t.id===e))||delete r[e];const a=new(pe())({inputs:r
}),l=await Promise.all([n.e(70166),n.e(6446),n.e(88601),n.e(11754),n.e(22666),n.e(84139),n.e(92108),n.e(5993),n.e(9817),n.e(4015),n.e(92191),n.e(53842),n.e(34465),n.e(69121),n.e(66639),n.e(88194),n.e(38669),n.e(35649),n.e(5145),n.e(89842),n.e(25190),n.e(30006),n.e(93502),n.e(72639),n.e(36884),n.e(32109),n.e(87845),n.e(58056),n.e(26855),n.e(91033),n.e(21625),n.e(13152),n.e(61631),n.e(99916),n.e(90684),n.e(84281),n.e(40866),n.e(43610),n.e(68992),n.e(73954),n.e(36956),n.e(96899),n.e(56388),n.e(9227),n.e(8740),n.e(77807),n.e(89434),n.e(58289),n.e(24215),n.e(43445),n.e(21895),n.e(18511),n.e(22333),n.e(15886),n.e(36740),n.e(54474),n.e(73606),n.e(71762),n.e(50690),n.e(30979),n.e(26300),n.e(66243),n.e(48493),n.e(68985),n.e(98355),n.e(37070),n.e(50186),n.e(41373),n.e(28033),n.e(32530),n.e(97273),n.e(53030)]).then(n.bind(n,280881));i=(await l.selectInputValuesOnChart(this._chartWidget,o,a,t.shortDescription,t.inputs)).customSourceId,e.properties().mergeAndFire(a.state())}finally{void 0!==i&&this._chartWidget.model().model().removeCustomSource(i)}}})}_createActionLayoutChartsSync(){return new Z.LayoutChartsSyncContextMenuAction(this._chartWidget.linkingGroupIndex().readonly(),(e=>this._chartWidget.model().setLinkingGroupIndex(e)))}_createActionScaleDetach(e,t,n,i){const r=this._chartWidget.model().model(),a=(0,o.ensureNotNull)(r.paneForSource(e));if(!a.canCreateNewPriceScale())return null;const l=(0,o.ensureNotNull)(e.priceScale()),s=l.canDetachSource(e),u=a.priceScalePosition(l),h=s||u!==t;if(!h)return null;const p=r.priceScaleSlotsCount(),g={left:{labelled:Mt,sided:It},right:{labelled:Mt,sided:Lt}},m="left"===t?a.leftPriceScales().length:a.rightPriceScales().length,v=p[t]>m?"labelled":"sided",S=(0,d.getPriceAxisNameInfo)(t,m).label,y=g[t][v].format({label:S});return new c.Action({actionId:"Chart.Source.ChangePriceScale",checkable:!1,disabled:!h,label:y,statName:i,payload:e,onExecute:n})}_onDetachLeft(e){const t=e.getPayload(),n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t));this._chartWidget.model().detachToLeft(t,i)}_onDetachRight(e){const t=e.getPayload(),n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t));this._chartWidget.model().detachToRight(t,i)}_createActionScaleDetachLeft(e){return this._createActionScaleDetach(e,"left",this._onDetachLeft.bind(this),"ToggleScaleLeft")}_createActionScaleDetachRight(e){return this._createActionScaleDetach(e,"right",this._onDetachRight.bind(this),"ToggleScaleRight")}_onMoveToScale(e){const t=e.getPayload();if(t.datasource.priceScale()===t.priceScale)return;const n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t.datasource));this._chartWidget.model().moveToScale(t.datasource,i,t.priceScale,t.undoText)}_createMoveToScaleAction(e,t,n,o){const i=e.priceScale()===t;return new c.Action({actionId:"Chart.Source.MoveToOtherScale",checkable:!0,checked:i,label:n,statName:"ToggleScale",payload:{datasource:e,priceScale:t,undoText:o},onExecute:this._onMoveToScale.bind(this)})}_onNoScale(e){
const t=e.getPayload().datasource,n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t));i.isOverlay(t)||this._chartWidget.model().detachNoScale(t,i)}_createActionNoScale(e){const t=this._chartWidget.model().model(),n=(0,o.ensureNotNull)(t.paneForSource(e)),i=n.actionNoScaleIsEnabled(e);return new c.Action({actionId:"Chart.Source.MoveToNoScale",checkable:!0,checked:n.isOverlay(e),label:Gt,disabled:!i,statName:"ToggleNoScale",payload:{datasource:e},onExecute:this._onNoScale.bind(this)})}_createActionScaleItems(e){const t=[],n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(e)),r=n.priceScaleSlotsCount().totallySlots>1,a=i.rightPriceScales(),l=i.leftPriceScales(),s=this._createActionScaleDetachRight(e),u=this._createActionScaleDetachLeft(e),h=a.length+l.length+(null===s?0:1)+(null===u?0:1)>2,p={right:{hidden:{checked:{labelled:bt,sided:wt},unchecked:{labelled:ft,sided:At}},visible:{checked:{labelled:Tt,sided:_t},unchecked:{labelled:Mt,sided:Et}}},left:{hidden:{checked:{labelled:bt,sided:Ct},unchecked:{labelled:ft,sided:kt}},visible:{checked:{labelled:Tt,sided:Nt},unchecked:{labelled:Mt,sided:Pt}}}},g={right:be,left:we},m={left:i.visibleLeftPriceScales(),right:i.visibleRightPriceScales()},v=(t,n)=>{const o=("right"===n?a:l)[t],i=m[n].includes(o)?"visible":"hidden",s=e.priceScale()===o?"checked":"unchecked",c=r?"labelled":"sided",u=p[n],h=(0,d.getPriceAxisNameInfo)(n,t).label;return{actionText:u[i][s][c].format({label:h}),undoText:r?ye.format({label:h}):g[n]}};t.push(...a.map(((t,n)=>{const o=v(n,"right");return this._createMoveToScaleAction(e,t,o.actionText,o.undoText)}))),null!==s&&t.push(s);h&&(a.length>0||null!==s)&&t.push(new c.Separator);t.push(...l.map(((t,n)=>{const o=v(n,"left");return this._createMoveToScaleAction(e,t,o.actionText,o.undoText)}))),null!==u&&t.push(u);h&&(l.length>0||null!==u)&&t.push(new c.Separator);return t.push(this._createActionNoScale(e)),t}_createActionMergeUp(e){const t=this._chartWidget.model();return t.model().isMergeUpAvailableForSource(e)?new c.Action({actionId:"Chart.Source.MergeUp",label:Vt,statName:"MergeUp",onExecute:()=>t.mergeSourceUp(e)}):null}_createActionUnmergeUp(e){const t=this._chartWidget.model();return t.model().isUnmergeAvailableForSource(e)?new c.Action({actionId:"Chart.Source.UnmergeUp",label:Ut,statName:"UnmergeUp",onExecute:()=>t.unmergeSourceUp(e)}):null}_createActionMergeDown(e){const t=this._chartWidget.model();return t.model().isMergeDownAvailableForSource(e)?new c.Action({actionId:"Chart.Source.MergeDown",label:Rt,statName:"MergeDown",onExecute:()=>t.mergeSourceDown(e)}):null}_createActionUnmergeDown(e){const t=this._chartWidget.model();return t.model().isUnmergeAvailableForSource(e)?new c.Action({actionId:"Chart.Source.UnmergeDown",label:Ht,statName:"UnmergeDown",onExecute:()=>t.unmergeSourceDown(e)}):null}_mergeContentMenuItems(e){return[this._createActionMergeUp(e),this._createActionUnmergeUp(e),this._createActionMergeDown(e),this._createActionUnmergeDown(e)].filter(a.notNull)}_createActionMove(e){
const t=this._mergeContentMenuItems(e);return t.length>0?new c.Action({actionId:"Chart.Source.MoveToPane",label:Ot,icon:n(854190),subItems:t}):null}_contextMenuActionsForSeries(e,t){var n;const i=[],r=e.properties().childs().visible.value(),a=this._chartWidget.model().model(),l=(0,o.ensureNotNull)(a.paneForSource(e)),u=this._chartWidget.actions(),d=t&&"localY"in t?t.localY:void 0;if(this._isReadOnly())i.push(r?this._createActionHide(e):this._createActionShow(e)),i.push(new c.Separator),i.push(this._createActionScale(e));else{if(e.alertCreationAvailable().value()){const t=Fn(this._chartWidget,{series:e,localY:d});null!==t&&i.push(t)}if(i.push(this._createActionAddChildStudy(e)),this._options.fundamentals){const t=this._createActionAddFundamentals(e);null!==t&&i.push(t)}if(this._options.mainSeriesTrade){const e=Gn(this._chartWidget);null!==e&&i.push(e)}i.length>0&&!(i[i.length-1]instanceof c.Separator)&&i.push(new c.Separator),s.enabled("symbol_info")&&i.push(u.showSymbolInfoDialog),Kn()&&i.push(this._chartWidget.actions().showDataWindow);const t=a.mainSeries().symbolInfo();if(u.showFinancials&&null!==t&&(0,G.hasFinancialsByTypespecs)(t.type,t.typespecs)&&i.push(u.showFinancials),i.length>0&&!(i[i.length-1]instanceof c.Separator)&&i.push(new c.Separator),!l.isEmpty()&&s.enabled("datasource_copypaste")){const e=Rn(l,d),t=On(this._chartWidget,l);(e||t)&&(e&&i.push(e),t&&i.push(t),i.push(new c.Separator))}i.push(Vn(this._chartWidget,[e]));const h=this._createActionMove(e);null!==h&&i.push(h),i.push(this._createActionScale(e)),this._chartWidget.isMultipleLayout().value()&&(this._chartWidget.chartWidgetCollection().lock.symbol.value()||this._chartWidget.chartWidgetCollection().lock.interval.value())&&i.push(this._createActionLayoutChartsSync()),i.push(r?this._createActionHide(e):this._createActionShow(e)),i.push(new c.Separator),(0,V.isFeatureEnabled)("remove_lines_submenu")||(i.push(Bn(this._chartWidget)),i.push(new c.Separator));Boolean(null===(n=window.widgetbar)||void 0===n?void 0:n.widget("watchlist"))&&u.addToWatchlist&&i.push(u.addToWatchlist),s.enabled("text_notes")&&i.push(u.addToTextNotes),i[i.length-1]instanceof c.Separator||i.push(new c.Separator),window.pro&&window.pro.hasPackage("mtp-mtpredictor")&&i.push((0,o.ensureNotNull)(Hn(this._chartWidget,l)),new c.Separator),s.enabled("show_chart_property_page")&&!this._chartWidget.onWidget()&&i.push(u.mainSeriesPropertiesAction),i[i.length-1]instanceof c.Separator&&i.pop()}return i}_createActionAddChildStudy(e){const t=this._chartWidget.model().model();return new y.TVAction({label:en.format({studyTitle:Dn(e)}),icon:n(706862),statName:"ApplyIndicator",onExecute:()=>{const n=this._chartWidget.showIndicators((0,p.isStudy)(e)?[e]:[]);if(n&&(0,p.isStudy)(e)){const e=()=>{(0,m.trackEvent)("SOS","Apply SOS","Apply by RC menu")},o=t.studyInserted();o.subscribe(this,e),n.visible().subscribe((t=>{t||o.unsubscribe(this,e)}),{once:!0})}}})}_createActionAddFundamentals(e){{const t=e.symbolInfo();if(null!==t&&"forex"!==t.type&&!(0,
Q.hasCryptoTypespec)(t.typespecs||[]))return new y.TVAction({label:tn.format({instrumentName:Dn(e)}),icon:n(428026),statName:"ApplyFundamental",onExecute:()=>{this._chartWidget.showFundamentals(e!==this._chartWidget.model().mainSeries()?e:void 0)}})}return null}_createActionShowSymbolInfoDialog(e,t){const o=this._chartWidget.model().model();return new c.Action({actionId:"Chart.Dialogs.ShowSymbolInfo",label:Pn,icon:n(437924),checkable:!1,statName:"SymbolInfo",onExecute:()=>{const n=e.symbol(),i={symbolInfo:e.symbolInfo(),unitDescription:e=>t.description(e),dateFormatter:o.dateFormatter()};(0,te.showSymbolInfoDialog)(n,i)}})}_createActionShowProperties(e){return new c.Action({actionId:"Chart.Indicator.ShowSettingsDialog",label:nn,icon:n(951983),statName:"EditSelectedObject",onExecute:()=>this._chartWidget.showSourceProperties(e)})}async _contextMenuActionsForStudy(e,t){const o=this._chartWidget.actions(),i=e.properties().childs().visible.value(),r=t&&"localY"in t?t.localY:void 0,a=[];if(!e.userEditEnabled())return a;if(this._chartWidget.readOnly())a.push(i?this._createActionHide(e):this._createActionShow(e)),a.push(new c.Separator),(0,b.isNonSeriesStudy)(e)||a.push(this._createActionScale(e));else{if(e.alertCreationAvailable().value()){const t=Fn(this._chartWidget,{series:e,localY:r});null!==t&&a.push(t)}if(s.enabled("study_on_study")&&e.canHaveChildren()&&a.push(this._createActionAddChildStudy(e)),(e instanceof X.StudyCompare||e instanceof J.study_Overlay)&&this._options.fundamentals){const t=this._createActionAddFundamentals(e);null!==t&&a.push(t)}const t=this._createApplyToEntireLayoutCommand(e);if(null!==t&&a.push(t),a.length>0&&!(a[a.length-1]instanceof c.Separator)&&a.push(new c.Separator),s.enabled("symbol_info")&&(e instanceof X.StudyCompare||e instanceof J.study_Overlay)&&null!==e.symbolInfo()&&(a.push(this._createActionShowSymbolInfoDialog(e,this._chartWidget.model().model().availableUnits())),a.push(new c.Separator)),a.push(Vn(this._chartWidget,[e])),a.push(Un(this._chartWidget,[e])),!(0,b.isNonSeriesStudy)(e)){const t=this._createActionMove(e);null!==t&&a.push(t),a.push(this._createActionScale(e))}a.push(new c.Separator);const u=e.metaInfo();if(!(0,p.isFundamentalStudy)(e)&&u.pine&&o.viewSourceCode){const{scriptIdPart:t,pine:{version:i}}=u;let r;if(U.StudyMetaInfo.hasStdSuffix(t)){const{default:e}=await n.e(95937).then(n.t.bind(n,676006,19));t in e&&(r=()=>(0,R.showSupportDialog)({solutionId:e[t]}))}else U.StudyMetaInfo.hasPubSuffix(t)&&(r=async()=>{try{const{chartImageUrl:n}=await(0,C.requestScriptInfo)(t);(0,H.pushChartPage)({chartId:n,chartName:e.title(h.TitleDisplayTarget.StatusLine)})}catch(e){(0,B.showScriptInfoErrorNoticeDialog)()}});void 0!==r&&a.push(new y.TVAction({label:(0,re.appendEllipsis)(l.t(null,void 0,n(907859))),statName:"OpenSelectedObjectAbout",onExecute:r})),a.push(o.viewSourceCode);const s=this._createActionResetInputPoints(e);s&&a.push(s),a.push(new c.Separator),o.viewSourceCode.update({disabled:!1}),(0,C.isAuthToGetPineSourceCode)(t,i).done((e=>{e||o.viewSourceCode.update({
disabled:!0})})).fail((e=>{ge.logError("Failed isAuthToGetPineSourceCode, reason: "+e)}))}if(window.is_authenticated&&(0,V.isFeatureEnabled)("enable_pine_logs")&&u.pine&&(a.push(new y.TVAction({label:l.t(null,void 0,n(249313)),statName:"PineLogs",onExecute:()=>{(0,ee.openPineLogsInRightPanel)()}})),a.push(new c.Separator)),e.copiable()){const t=new c.Action({actionId:"Chart.Clipboard.CopySource",label:an,shortcutHint:(0,q.humanReadableHash)(q.Modifiers.Mod+67),statName:"Copy",onExecute:()=>{this._chartWidget.chartWidgetCollection().clipboard.uiRequestCopy([e])}});a.push(t)}a.push(i?this._createActionHide(e):this._createActionShow(e)),a.push(o.studyRemove);const d=!this._chartWidget.onWidget()&&this._options.objectTree&&o.paneObjectTree,g=Kn();(d||g)&&(a.push(new c.Separator),d&&a.push(o.paneObjectTree),g&&a.push(this._chartWidget.actions().showDataWindow)),a.push(new c.Separator),s.enabled("property_pages")&&new w.MetaInfoHelper(u).hasUserEditableOptions()&&a.push(this._createActionShowProperties(e)),a[a.length-1]instanceof c.Separator&&a.pop()}return a}_createEditAlertDrawingAction(e){return new y.TVAction({label:Ke.format({title:e.title(h.TitleDisplayTarget.StatusLine)}),icon:W,statName:"EditAlert",onExecute:()=>{window.runOrSignIn((()=>{e.editAlert("pane_context_menu_edit_alert")}),{source:"Alert edit from pane context menu"})}})}_createLineToolTemplateAction(e){{const t=this._chartWidget.model(),o=n=>{t.applyLineToolTemplate(e,n,De)};return new c.ActionAsync("Chart.LineTool.Templates",(async()=>{const{LinetoolTemplatesList:i}=await Promise.all([n.e(29594),n.e(91622),n.e(3177)]).then(n.bind(n,998777)),r=new i(e.toolname,o),a=[],l=new c.Action({actionId:"Chart.LineTool.Templates.SaveAs",label:rn,statName:"SaveAs",onExecute:()=>{r.showSaveDialog((t=>{const n=JSON.stringify(e.template());r.saveTemplate(t,n)}))}});a.push(l);const s=new c.Action({actionId:"Chart.LineTool.Templates.ApplyDefaults",label:on,statName:"ApplyDefault",onExecute:()=>{t.restorePropertiesForSource(e),window.lineToolPropertiesToolbar.onSourceChanged([e])}});return a.push(s),new Promise((e=>{r.templatesLoaded().then((()=>{var e;const t=null!==(e=r.getData())&&void 0!==e?e:[];t.length>0&&a.push(new c.Separator),t.forEach(((e,t)=>{const n=new c.Action({actionId:"Chart.LineTool.Templates.Apply",label:e,statName:"ApplyTemplate",onExecute:()=>r.loadTemplate(e),toolbox:{type:$.ToolboxType.Delete,action:()=>{r.deleteAction(e)}},showToolboxOnHover:!0});a.push(n)}))}),(e=>{ge.logWarn(e)})).then((()=>{e({label:sn,statName:"Template",subItems:a})}))}))}))}}_createActionToggleLockLineTools(e){const t=e[0].properties().frozen.value(),o=t?un:dn;return new c.Action({actionId:"Chart.SelectedObject.ToggleLocked",label:o,statName:"ToggleLockSelectedObject",checkable:!0,icon:n(t?397874:902872),onExecute:()=>{if(1===e.length)this._chartWidget.toggleLockSelectedObject();else{const n=t?Ge:Fe,o=this._chartWidget.model();o.withMacro(n,(()=>{e.forEach((e=>{o.setProperty(e.properties().frozen,!t,n)}))}))}}})}async _contextMenuActionsForLineTool(e){
const t=[],i=this._chartWidget.actions(),a=this._chartWidget.model().model(),l=()=>{t.push(Vn(this._chartWidget,e))},u=()=>{t.push(Un(this._chartWidget,e))},d=()=>{const o=e.filter((e=>e.cloneable()));if(o.length>0){const e=new c.Action({actionId:"Chart.LineTool.Clone",label:ln,icon:n(201457),shortcutHint:(0,q.humanReadableModifiers)(q.Modifiers.Mod)+"Drag",statName:"Clone",onExecute:()=>this._chartWidget.model().cloneLineTools(o,!1)},"Clone");t.push(e)}return!!o.length},p=()=>{const n=e.filter((e=>e.copiable()));if(n.length>0){const e=new c.Action({actionId:"Chart.Clipboard.CopyLineTools",label:an,shortcutHint:(0,q.humanReadableHash)(q.Modifiers.Mod+67),statName:"Copy",onExecute:()=>this._chartWidget.chartWidgetCollection().clipboard.uiRequestCopy(n)},"Copy");t.push(e)}return!!n.length},g=()=>{const n=jn(this._chartWidget,e);return t.push(...n),n.length>0},m=async e=>{if(this._chartWidget.model().isInReplay())return;const n=e.getOrderTemplate();if(null===n)return;const i=(0,f.tradingService)();if(null!==i){const e=i.activeBroker();if(e&&1===e.connectionStatus()&&e.metainfo().configFlags.supportLimitOrders){const l=a.mainSeries(),{symbol:s}=await i.getActualSymbol(l.proSymbol()),{tradable:u}=await e.isTradable(s);if(u){const{qty:{step:i}}=await e.symbolInfo(s);n.symbol=s,n.qty=function(e,t){return(0,r.Big)(e).div(t).round(void 0,0).mul(t).toNumber()}(n.qty,i),t.push(new c.Separator),t.push(function(e){const t=(0,o.ensureNotNull)((0,f.tradingService)());return new c.Action({actionId:"Chart.LineTool.CreateLimitOrderFromState",label:Ze,statName:"CreateLimitOrder",onExecute:()=>{t.trackEvent("Chart Context Menu","RiskRewardCreateLimitOrder"),(0,o.ensureNotNull)(t.brokerCommandsUI()).placeOrder(e)}})}(n))}}else null===e&&(t.push(new c.Separator),t.push((0,o.ensureNotNull)(function(){const e=(0,o.ensureNotNull)((0,f.tradingService)());return new y.TVAction({label:Ze,statName:"ShowSelectBrokerNotification",onExecute:()=>{var t;(0,O.isMobileTradingAvailable)()&&!(null===(t=window.TradingView.bottomWidgetBar)||void 0===t?void 0:t.isVisible().value())?e.toggleTradingPanelPopup():e.toggleTradingWidget(),e.onNeedSelectBroker.fire()}})}())))}},v=e=>{const n=new c.Action({actionId:"Chart.ScrollToLineTool",label:cn.format({lineToolName:e.title(h.TitleDisplayTarget.StatusLine)}),statName:"GoToLineTool",checkable:!1,onExecute:async()=>this._chartWidget.model().scrollToLineTool(e)});t.push(n)},S=e=>{const t=this._chartWidget.model().model().lineToolsGroupModel(),n=e.map((e=>t.groupForLineTool(e)));return new Set(n).size<=1};if(1===e.length){const n=e[0];if(this._chartWidget.readOnly())t.push(i.lineHide);else if(n.userEditEnabled()){if(s.enabled("alerts")&&!this._chartWidget.onWidget())if(n.hasAlert&&n.hasAlert.value())t.push(this._createEditAlertDrawingAction(n)),t.push(new c.Separator);else if(n.canHasAlert()&&n.alertCreationAvailable().value()){const e=Fn(this._chartWidget,{drawing:n});null!==e&&(t.push(e),t.push(new c.Separator))}{const e=this._createLineToolTemplateAction(n);null!==e&&t.push(e)}l(),u(),
this._options.objectTree&&i.paneObjectTree&&t.push(i.paneObjectTree),await m(n),t.push(new c.Separator);let e=d();e=p()||e,e=g()||e,e&&t.push(new c.Separator),t.push(this._createActionToggleLockLineTools([n])),t.push(i.lineHide),t.push(i.lineRemove),n.points().length>0&&this._options.gotoLineTool&&(t.push(new c.Separator),v(n));const o=await this._chartWidget.propertiesDefinitionsForSource(n);if(s.enabled("property_pages")&&null!==o&&(t.push(new c.Separator),t.push(i.format)),n.additionalActions){t.push(new c.Separator);const e=n.additionalActions(this._chartWidget.model());t.push(...e)}}}else this._options.objectTree&&i.paneObjectTree&&t.push(i.paneObjectTree),S(e)&&l(),u(),t.length>0&&t.push(new c.Separator),d(),p(),g(),t.push(new c.Separator),t.push(this._createActionToggleLockLineTools(e)),t.push(i.lineHide),t.push(i.lineRemove),s.enabled("property_pages")&&(t.push(new c.Separator),t.push(i.format));return t}_createEarningsShow(){const e=this._chartWidget.model().mainSeries().properties().childs().esdShowEarnings;return new y.TVAction({label:hn,checkable:!0,checked:e.value(),name:"ToggleShowEarnings",statName:"ToggleShowEarnings",onExecute:t=>this._chartWidget.model().setProperty(e,t.isChecked(),fe)})}_createDividendsShow(){const e=this._chartWidget.model().mainSeries().properties().childs().esdShowDividends;return new y.TVAction({label:pn,checkable:!0,checked:e.value(),name:"ToggleShowDividends",statName:"ToggleShowDividends",onExecute:t=>this._chartWidget.model().setProperty(e,t.isChecked(),Ae)})}_createSplitsShow(){const e=this._chartWidget.model().mainSeries().properties().childs().esdShowSplits;return new y.TVAction({checkable:!0,label:gn,checked:e.value(),name:"ToggleShowSplits",statName:"ToggleShowSplits",onExecute:t=>this._chartWidget.model().setProperty(e,t.isChecked(),Te)})}_contextMenuActionsForESD(){const e=[];return this._chartWidget.readOnly()||e.push((0,o.ensureNotNull)(this._createDividendsShow()),(0,o.ensureNotNull)(this._createSplitsShow()),(0,o.ensureNotNull)(this._createEarningsShow())),e}_contextMenuActionsForRollDates(){const e=[];if(!this._chartWidget.readOnly()){const t=this._chartWidget.model().mainSeries().properties().childs().showContinuousContractSwitches;e.push(new y.TVAction({label:mn,checkable:!0,checked:t.value(),name:"ToggleShowContractSwitches",statName:"ToggleShowContractSwitches",onExecute:e=>this._chartWidget.model().setProperty(t,e.isChecked(),_e)}))}return e}_contextMenuActionsForFuturesContractExpiration(){const e=[];if(!this._chartWidget.readOnly()){const t=this._chartWidget.model().mainSeries().properties().childs().showFuturesContractExpiration;e.push(new y.TVAction({label:vn,checkable:!0,checked:t.value(),name:"ToggleShowFuturesContractExpirations",statName:"ToggleShowFuturesContractExpirations",onExecute:e=>this._chartWidget.model().setProperty(t,e.isChecked(),Me)}))}return e}_contextMenuActionsForisLatestUpdates(){const e=[];if(!this._chartWidget.readOnly()){const t=this._chartWidget.model().mainSeries().properties().childs().showLastNews;e.push(new y.TVAction({
label:Sn,checkable:!0,checked:t.value(),name:"ToggleShowLatestUpdates",statName:"ToggleShowLatestUpdates",onExecute:e=>this._chartWidget.model().setProperty(t,e.isChecked(),Ee)}))}return e}_contextMenuActionsForPublishedTimeline(e){const t=this._chartWidget.actions(),n=[];if(n.push(t.lineHide),window.is_authenticated){const t=e.properties().childs().filter,o=new y.TVAction({checked:t.value()===N.PublishedChartsFilter.None,checkable:!0,label:yn,name:"ToggleAllIdeas",statName:"ToggleAllIdeas",onExecute:()=>this._chartWidget.model().setProperty(t,N.PublishedChartsFilter.None,Ce)}),i=new y.TVAction({checked:t.value()===N.PublishedChartsFilter.Following,checkable:!0,label:bn,name:"ToggleIdeasOfPeopleAndUser",statName:"ToggleIdeasOfPeopleAndUser",onExecute:()=>this._chartWidget.model().setProperty(t,N.PublishedChartsFilter.Following,ke)}),r=new y.TVAction({checked:t.value()===N.PublishedChartsFilter.Private,checkable:!0,label:wn,name:"ToggleUserIdeas",statName:"ToggleUserIdeas",onExecute:()=>this._chartWidget.model().setProperty(t,N.PublishedChartsFilter.Private,Ne)});n.push(new c.Separator,o,i,r)}return n}_contextMenuActionsForTradingDrawings(e){return e.contextMenuItems()}_createAlertToggleHorzLineLabelAction(e){const t=(0,v.getSettingsProperty)().childs().line.childs().visible,n=t.value()?ve:me,o=t.value()?"turn_off_line":"turn_on_line";return new y.TVAction({checkable:!0,label:Ye,checked:t.value(),statName:"ToggleExtendAlertLine",onExecute:()=>((0,m.trackEvent)("chart_alert",o,e),this._chartWidget.model().setProperty(t,!t.value(),n))})}_contextMenuActionsForAlertLabel(e,t){const n=`chart_alert_context_menu_${null!=t?t:"line"}`,o="chart_alert",i=[],r=e.id().value();return void 0===r||(e.isActive()?i.push(E.ActionCreators.stopAlert(r,(()=>{(0,m.trackEvent)(o,"stop",n)}))):i.push(E.ActionCreators.restartAlert(r)),i.push(E.ActionCreators.editAlert(r,"alert_label_context_menu_edit",void 0,(()=>{(0,m.trackEvent)(o,"edit",n)}))),i.push(E.ActionCreators.deleteAlert(r,(()=>{(0,m.trackEvent)(o,"delete",n)}))),i.push(new c.Separator),i.push(this._createAlertToggleHorzLineLabelAction(n))),i}_contextMenuActionsForChartEvents(e){const t=[];if(s.enabled("property_pages")){const e=new y.TVAction({label:fn,statName:"Format",onExecute:()=>this._chartWidget.showGeneralChartProperties(g.TabNames.eventsAndAlerts)});t.push(e)}const n=new y.TVAction({label:An,name:"HideEvents",statName:"HideEvents",onExecute:()=>this._chartWidget.model().setProperty(e.properties().childs().visible,!1,Pe)});return t.push(n),t}_createApplyToEntireLayoutCommand(e){if(!this._chartWidget.chartWidgetCollection().applyIndicatorsToAllChartsAvailable())return null;const t=this._chartWidget.model().model();if(e.parentSources().length>0)return null;const n=(0,o.ensureNotNull)(t.paneForSource(e)),i=t.paneForSource(t.mainSeries())===n,r=e instanceof X.StudyCompare&&e.priceScale()===t.mainSeries().priceScale()&&(0,o.ensureNotNull)(e.priceScale()).isPercentage(),a=i?void 0:t.panes().indexOf(n);let l=_n,s=Le,u="AddStudyToEntireLayout";return(0,
ie.isActingAsSymbolSource)(e)&&(l=Tn,s=Ie,u="AddSymbolToEntireLayout"),(0,p.isStudyStrategy)(e)&&(l=Mn,s=xe,u="AddStrategyToEntireLayout"),e instanceof F.Fundamental&&(l=En,s=We,u="AddFundamentalToEntireLayout"),new c.Action({actionId:"Chart.AddIndicatorToAllCharts",label:l,statName:u,onExecute:()=>{const n=(0,o.ensureNotNull)((0,ne.clipboardDataForSources)(t.id(),[e])),l=this._chartWidget.chartWidgetCollection(),c={isOnMainPane:i,asCompare:r,paneIndex:a};l.applyIndicatorToAllCharts(this._chartWidget,n,c,s)}},"applyStudyToEntireLayout")}}},483307:(e,t,n)=>{n.d(t,{ERL_COUNTRY_CODE:()=>l,EU_COUNTRY_CODE:()=>a,convertCurrenciesToCountryCodes:()=>m,countries:()=>s,countriesToMarketsArray:()=>u,countriesToMarketsMap:()=>c,currenciesByCountryCodes:()=>h,defaultCurrencies:()=>p,defaultMarkets:()=>g});var o=n(777754),i=n(143517);const r="EUR",a="eu",l="ERL",s=[{name:o.t(null,void 0,n(476342)),code:"ao",group:i.MarketGroup.MiddleEastAfrica,currency:"AON"},{name:o.t(null,void 0,n(834742)),code:"ar",group:i.MarketGroup.MexicoSouthAmerica,currency:"ARS"},{name:o.t(null,void 0,n(50132)),code:"au",group:i.MarketGroup.AsiaPacific,currency:"AUD"},{name:o.t(null,void 0,n(226505)),code:"at",group:i.MarketGroup.Europe,currency:"ATS"},{name:o.t(null,void 0,n(53260)),code:"bh",group:i.MarketGroup.MiddleEastAfrica,currency:"BHD"},{name:o.t(null,void 0,n(61587)),code:"bd",group:i.MarketGroup.AsiaPacific,currency:"BDT"},{name:o.t(null,void 0,n(637653)),code:"be",group:i.MarketGroup.Europe,currency:"BEF"},{name:o.t(null,void 0,n(746406)),code:"bw",group:i.MarketGroup.MiddleEastAfrica,currency:"BWP"},{name:o.t(null,void 0,n(228867)),code:"br",group:i.MarketGroup.MexicoSouthAmerica,currency:"BRL"},{name:o.t(null,void 0,n(411176)),code:"us",group:i.MarketGroup.NorthAmerica,currency:"USD"},{name:o.t(null,void 0,n(280206)),code:"ca",group:i.MarketGroup.NorthAmerica,currency:"CAD"},{name:o.t(null,void 0,n(141840)),code:"cl",group:i.MarketGroup.MexicoSouthAmerica,currency:"CLP"},{name:o.t(null,void 0,n(420844)),code:"cn",group:i.MarketGroup.AsiaPacific,currency:"CNY"},{name:o.t(null,void 0,n(731144)),code:"co",group:i.MarketGroup.MexicoSouthAmerica,currency:"COP"},{name:o.t(null,void 0,n(551017)),code:"cy",group:i.MarketGroup.Europe,currency:"EUR"},{name:o.t(null,void 0,n(342054)),code:"cz",group:i.MarketGroup.Europe,currency:"CZK"},{name:o.t(null,void 0,n(64901)),code:"dk",group:i.MarketGroup.Europe,currency:"DKK"},{name:o.t(null,void 0,n(205390)),code:"eg",group:i.MarketGroup.MiddleEastAfrica,currency:"EGP"},{name:o.t(null,void 0,n(959823)),code:"ee",group:i.MarketGroup.Europe,currency:"EEK"},{name:o.t(null,void 0,n(698440)),code:"et",group:i.MarketGroup.MiddleEastAfrica,currency:"ETB"},{name:o.t(null,void 0,n(600442)),code:a,group:i.MarketGroup.Europe,currency:r},{name:o.t(null,void 0,n(936693)),code:"fi",group:i.MarketGroup.Europe,currency:"FIM"},{name:o.t(null,void 0,n(696013)),code:"fr",group:i.MarketGroup.Europe,currency:"FRF"},{name:o.t(null,void 0,n(159985)),code:"de",group:i.MarketGroup.Europe,currency:"DEM"},{
name:o.t(null,void 0,n(848856)),code:"gh",group:i.MarketGroup.MiddleEastAfrica,currency:"GHC"},{name:o.t(null,void 0,n(480411)),code:"gr",group:i.MarketGroup.Europe,currency:"GRD"},{name:o.t(null,void 0,n(532918)),code:"hk",group:i.MarketGroup.AsiaPacific,currency:"HKD"},{name:o.t(null,void 0,n(930646)),code:"hu",group:i.MarketGroup.Europe,currency:"HUF"},{name:o.t(null,void 0,n(664150)),code:"is",group:i.MarketGroup.Europe,currency:"ISK"},{name:o.t(null,void 0,n(16207)),code:"in",group:i.MarketGroup.AsiaPacific,currency:"INR"},{name:o.t(null,void 0,n(609759)),code:"id",group:i.MarketGroup.AsiaPacific,currency:"IDR"},{name:o.t(null,void 0,n(328408)),code:"ie",group:i.MarketGroup.Europe,currency:"IRP"},{name:o.t(null,void 0,n(261935)),code:"il",group:i.MarketGroup.MiddleEastAfrica,currency:"ILS"},{name:o.t(null,void 0,n(43246)),code:"it",group:i.MarketGroup.Europe,currency:"ITL"},{name:o.t(null,void 0,n(692443)),code:"jp",group:i.MarketGroup.AsiaPacific,currency:"JPY"},{name:o.t(null,void 0,n(89080)),code:"ke",group:i.MarketGroup.MiddleEastAfrica,currency:"KES"},{name:o.t(null,void 0,n(173160)),code:"kr",group:i.MarketGroup.AsiaPacific,currency:"KRW"},{name:o.t(null,void 0,n(872374)),code:"kw",group:i.MarketGroup.MiddleEastAfrica,currency:"KWD"},{name:o.t(null,void 0,n(484045)),code:"lv",group:i.MarketGroup.Europe,currency:"LVR"},{name:o.t(null,void 0,n(529113)),code:"lt",group:i.MarketGroup.Europe,currency:"LTL"},{name:o.t(null,void 0,n(567835)),code:"lk",group:i.MarketGroup.AsiaPacific,currency:"LKR"},{name:o.t(null,void 0,n(652371)),code:"mw",group:i.MarketGroup.AsiaPacific,currency:"MWK"},{name:o.t(null,void 0,n(622622)),code:"my",group:i.MarketGroup.AsiaPacific,currency:"MYR"},{name:o.t(null,void 0,n(902616)),code:"mu",group:i.MarketGroup.MiddleEastAfrica,currency:"MUR"},{name:o.t(null,void 0,n(555087)),code:"mx",group:i.MarketGroup.MexicoSouthAmerica,currency:"MXN"},{name:o.t(null,void 0,n(158266)),code:"mz",group:i.MarketGroup.MiddleEastAfrica,currency:"MZM"},{name:o.t(null,void 0,n(714417)),code:"na",group:i.MarketGroup.MiddleEastAfrica,currency:"NAD"},{name:o.t(null,void 0,n(353770)),code:"nl",group:i.MarketGroup.Europe,currency:"NLG"},{name:o.t(null,void 0,n(824143)),code:"nz",group:i.MarketGroup.AsiaPacific,currency:"NZD"},{name:o.t(null,void 0,n(62410)),code:"ng",group:i.MarketGroup.MiddleEastAfrica,currency:"NGN"},{name:o.t(null,void 0,n(145075)),code:"no",group:i.MarketGroup.Europe,currency:"NOK"},{name:o.t(null,void 0,n(552456)),code:"om",group:i.MarketGroup.MiddleEastAfrica,currency:"OMR"},{name:o.t(null,void 0,n(622979)),code:"pe",group:i.MarketGroup.MexicoSouthAmerica,currency:"PEN"},{name:o.t(null,void 0,n(226813)),code:"ph",group:i.MarketGroup.AsiaPacific,currency:"PHP"},{name:o.t(null,void 0,n(210119)),code:"pl",group:i.MarketGroup.Europe,currency:"PLZ"},{name:o.t(null,void 0,n(123496)),code:"pt",group:i.MarketGroup.Europe,currency:"PTE"},{name:o.t(null,void 0,n(619056)),code:"qa",group:i.MarketGroup.MiddleEastAfrica,currency:"QAR"},{name:o.t(null,void 0,n(385646)),code:"ro",
group:i.MarketGroup.Europe,currency:"RON"},{name:o.t(null,void 0,n(238201)),code:"ru",group:i.MarketGroup.Europe,currency:"RUR"},{name:o.t(null,void 0,n(242890)),code:"rw",group:i.MarketGroup.MiddleEastAfrica,currency:"RWF"},{name:o.t(null,void 0,n(936261)),code:"sa",group:i.MarketGroup.MiddleEastAfrica,currency:"SAR"},{name:o.t(null,void 0,n(896573)),code:"rs",group:i.MarketGroup.Europe,currency:"RSD"},{name:o.t(null,void 0,n(959609)),code:"sc",group:i.MarketGroup.MiddleEastAfrica,currency:"SCR"},{name:o.t(null,void 0,n(156683)),code:"sg",group:i.MarketGroup.AsiaPacific,currency:"SGD"},{name:o.t(null,void 0,n(506262)),code:"sk",group:i.MarketGroup.Europe,currency:"SKK"},{name:o.t(null,void 0,n(528900)),code:"za",group:i.MarketGroup.MiddleEastAfrica,currency:"ZAR"},{name:o.t(null,void 0,n(792334)),code:"es",group:i.MarketGroup.Europe,currency:"ESP"},{name:o.t(null,void 0,n(182404)),code:"se",group:i.MarketGroup.Europe,currency:"SEK"},{name:o.t(null,void 0,n(440414)),code:"ch",group:i.MarketGroup.Europe,currency:"CHF"},{name:o.t(null,void 0,n(889563)),code:"tw",group:i.MarketGroup.AsiaPacific,currency:"TWD"},{name:o.t(null,void 0,n(185494)),code:"tz",group:i.MarketGroup.MiddleEastAfrica,currency:"TZS"},{name:o.t(null,void 0,n(433138)),code:"th",group:i.MarketGroup.AsiaPacific,currency:"THB"},{name:o.t(null,void 0,n(420638)),code:"tn",group:i.MarketGroup.MiddleEastAfrica,currency:"TND"},{name:o.t(null,void 0,n(694398)),code:"tr",group:i.MarketGroup.MiddleEastAfrica,currency:"TRL"},{name:o.t(null,void 0,n(308395)),code:"ug",group:i.MarketGroup.MiddleEastAfrica,currency:"UGX"},{name:o.t(null,void 0,n(263018)),code:"ua",group:i.MarketGroup.Europe,currency:"UAK"},{name:o.t(null,void 0,n(287916)),code:"ae",group:i.MarketGroup.MiddleEastAfrica,currency:"AED"},{name:o.t(null,void 0,n(606994)),code:"gb",group:i.MarketGroup.Europe,currency:"GBP"},{name:o.t(null,void 0,n(739055)),code:"ve",group:i.MarketGroup.MexicoSouthAmerica,currency:"VEF"},{name:o.t(null,void 0,n(450049)),code:"vn",group:i.MarketGroup.AsiaPacific,currency:"VND"},{name:o.t(null,void 0,n(239478)),code:"zm",group:i.MarketGroup.MiddleEastAfrica,currency:"ZMK"},{name:o.t(null,void 0,n(58309)),code:"zw",group:i.MarketGroup.MiddleEastAfrica,currency:"ZWD"}],c=new Map;for(const e of s)c.set(e.code,{...e,desc:"",value:e.code,country:e.code});const u=Array.from(c.values()),d=new Map,h=new Map;for(const e of s)d.set(e.currency,e.code),h.set(e.code,e.currency);const p=["USD",r,"ITL","NZD","CHF","AUD","FRF","JPY","ZAR","TRL","CAD","DEM","MXN","ESP","GBP"],g=m(p,!1);function m(e,t){const n=[];for(const o of e){const e=o===r&&t?l:d.get(o);e&&n.push(e)}return n}},451798:(e,t,n)=>{n.d(t,{magnetEnabled:()=>g,magnetMode:()=>m,setIsMagnetEnabled:()=>v,setMagnetMode:()=>S});var o=n(853965),i=n(401580),r=n(80646),a=n(885482),l=n(616117),s=n(237872);const c=new i.WatchedValue(!1),u=new i.WatchedValue(r.MagnetMode.WeakMagnet),d=(0,s.modifierPressed)(),h=(0,s.shiftPressed)();function p(){const e=d.value()
;if(h.value()&&(a.isToolEditingNow.value()||a.isToolCreatingNow.value()))return void c.setValue(!1);let t,n;if(a.activePointSelectionMode.value()===a.SelectPointMode.Replay)t=n=!1;else{const o=a.tool.value(),i=a.isStudyEditingNow.value()||a.activePointSelectionMode.value()===a.SelectPointMode.Study;t=e&&((0,l.isLineToolName)(o)||a.isToolEditingNow.value()||(0,a.toolIsMeasure)(o)||i),n=(0,a.properties)().childs().magnet.value()}u.setValue(!n&&t?r.MagnetMode.StrongMagnet:(0,a.properties)().childs().magnetMode.value()),c.setValue(t?!n:n)}function g(){return c}function m(){return u}function v(e){(0,o.saveDefaultProperties)(!0),(0,a.properties)().childs().magnet.setValue(e),(0,o.saveDefaultProperties)(!1)}function S(e){(0,o.saveDefaultProperties)(!0),(0,a.properties)().childs().magnetMode.setValue(e),(0,a.properties)().childs().magnet.setValue(!0),(0,o.saveDefaultProperties)(!1)}(0,a.runOnDrawingStateReady)((()=>{(0,a.properties)().childs().magnet.subscribe(null,p),(0,a.properties)().childs().magnetMode.subscribe(null,p),d.subscribe(p),h.subscribe(p),a.tool.subscribe(p),a.isToolEditingNow.subscribe(p),p()}))},151519:(e,t,n)=>{n.d(t,{getAlertEditorSource:()=>c});var o=n(624444),i=n(440617),r=n(161488),a=n(982217),l=n(62745),s=n(223284);function c(e){return e?(0,i.isSeries)(e)?u(e):(0,r.isStudyStrategy)(e)?{type:2,...p(e)}:(0,r.isStudy)(e)?d(e):null:null}function u(e){return{type:0,...h(e),isLogScale:()=>e.priceScale().isLog(),symbolInfo:()=>e.symbolInfo()}}function d(e){return{type:1,...p(e),isPine:()=>e.isPine()}}function h(e){return{getSymbolString:()=>e.getSymbolString(),interval:()=>e.interval(),isSpread:()=>e.isSpread(),isCryptoCap:()=>{var t;return"CRYPTOCAP"===(null===(t=e.symbolInfo())||void 0===t?void 0:t.exchange)},formatter:()=>function(e){if(!(e instanceof o.PriceFormatter))throw new Error(`Unsupported formatter type: ${e.constructor.name}`);if(e.isFractional())throw new Error(`Unsupported format of ${e.constructor.name}: fractional`);return e}(e.formatter()),title:()=>e.title(a.TitleDisplayTarget.StatusLine)}}function p(e){return{...h(e.series()),title:()=>e.title(a.TitleDisplayTarget.StatusLine),series:()=>u(e.series()),metaInfo:()=>e.metaInfo(),inputs:()=>function(e){const t=["pineId","pineVersion","text","__user_pro_plan"],n=["price","time","bar_time","color","text_area"],o={};for(const[i,r]of Object.entries(e)){if((0,l.isExtendedInput)(r)&&n.includes(r.t))throw new Error(`Unsupported input type ${r.t}`);t.includes(i)||(o[i]=(0,l.getInputValue)(r))}return o}(e.inputs()),plots:()=>(0,s.plotsForAlert)(e.metaInfo(),e.offset.bind(e)),properties:()=>e.properties(),resolvedSymbolInfoBySymbol:t=>e.resolvedSymbolInfoBySymbol(t),isChildStudy:()=>e.isChildStudy(),ownerSource:()=>c(e.ownerSource()),parentSources:()=>e.parentSources().map(d)}}}}]);